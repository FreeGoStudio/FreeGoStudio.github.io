<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.1.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha256-VHqXKFhhMxcpubYf9xiWdCiojEbY9NexQ4jh8AxbvcM=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"freegostudio.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.24.1","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js" defer></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="废狗的博客">
<meta property="og:url" content="https://freegostudio.github.io/index.html">
<meta property="og:site_name" content="废狗的博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Jacky Jiang">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://freegostudio.github.io/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>废狗的博客</title>
  








  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script>

  






  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">废狗的博客</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>







</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Jacky Jiang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">23</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://freegostudio.github.io/2025/08/20/Web%E4%BD%BF%E7%94%A8SerialPort%E8%B0%83%E7%94%A8%E4%B8%B2%E5%8F%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jacky Jiang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="废狗的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | 废狗的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/08/20/Web%E4%BD%BF%E7%94%A8SerialPort%E8%B0%83%E7%94%A8%E4%B8%B2%E5%8F%A3/" class="post-title-link" itemprop="url">Web使用SerialPort调用串口</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-08-20 12:13:33" itemprop="dateCreated datePublished" datetime="2025-08-20T12:13:33+08:00">2025-08-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">软件开发</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>最近公司需要接入非接触读卡器到系统,
但是绝对没有必要再单独开发个桌面应用来进行串口通信,
因此准备使用Web的SerialPort来实现. 感觉挺好玩的, 就准备弄一个玩.
借了个读卡器设备试试.</p>
<h1 id="通信参数">通信参数</h1>
<p>根据提供的开发文档可以得知<code>通信参数</code>为 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">115200,8,n,1</span><br></pre></td></tr></table></figure>
含义为:</p>
<p>波特率:115200, 数据长度:8, 奇偶校验:无, 停止位:1</p>
<h1 id="波特率">波特率</h1>
<p>波特率表示每秒钟传送的码元(符号)的个数,
单位是波特(Baud,symbol/s).</p>
<h2 id="与比特率的关系">与比特率的关系</h2>
<p>通过不同的调制方式, 可以在一个码元符号上负载多个bit位信息</p>
<p><span class="math display"><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.546ex;" xmlns="http://www.w3.org/2000/svg" width="14.019ex" height="2.141ex" role="img" focusable="false" viewBox="0 -705 6196.2 946.4"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D43C" d="M43 1Q26 1 26 10Q26 12 29 24Q34 43 39 45Q42 46 54 46H60Q120 46 136 53Q137 53 138 54Q143 56 149 77T198 273Q210 318 216 344Q286 624 286 626Q284 630 284 631Q274 637 213 637H193Q184 643 189 662Q193 677 195 680T209 683H213Q285 681 359 681Q481 681 487 683H497Q504 676 504 672T501 655T494 639Q491 637 471 637Q440 637 407 634Q393 631 388 623Q381 609 337 432Q326 385 315 341Q245 65 245 59Q245 52 255 50T307 46H339Q345 38 345 37T342 19Q338 6 332 0H316Q279 2 179 2Q143 2 113 2T65 2T43 1Z"></path></g><g data-mml-node="mo" transform="translate(781.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mi" transform="translate(1837.6,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g><g data-mml-node="mo" transform="translate(2704.8,0)"><path data-c="2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z"></path></g><g data-mml-node="msub" transform="translate(3427,0)"><g data-mml-node="mi"><path data-c="6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(278,0)"></path><path data-c="67" d="M329 409Q373 453 429 453Q459 453 472 434T485 396Q485 382 476 371T449 360Q416 360 412 390Q410 404 415 411Q415 412 416 414V415Q388 412 363 393Q355 388 355 386Q355 385 359 381T368 369T379 351T388 325T392 292Q392 230 343 187T222 143Q172 143 123 171Q112 153 112 133Q112 98 138 81Q147 75 155 75T227 73Q311 72 335 67Q396 58 431 26Q470 -13 470 -72Q470 -139 392 -175Q332 -206 250 -206Q167 -206 107 -175Q29 -140 29 -75Q29 -39 50 -15T92 18L103 24Q67 55 67 108Q67 155 96 193Q52 237 52 292Q52 355 102 398T223 442Q274 442 318 416L329 409ZM299 343Q294 371 273 387T221 404Q192 404 171 388T145 343Q142 326 142 292Q142 248 149 227T179 192Q196 182 222 182Q244 182 260 189T283 207T294 227T299 242Q302 258 302 292T299 343ZM403 -75Q403 -50 389 -34T348 -11T299 -2T245 0H218Q151 0 138 -6Q118 -15 107 -34T95 -74Q95 -84 101 -97T122 -127T170 -155T250 -167Q319 -167 361 -139T403 -75Z" transform="translate(778,0)"></path></g><g data-mml-node="TeXAtom" transform="translate(1311,-241.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g></g><g data-mml-node="mo" transform="translate(5141.6,0)"><path data-c="2061" d=""></path></g><g data-mml-node="mi" transform="translate(5308.2,0)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g></g></g></svg></mjx-container></span></p>
<p>I为传信率, S为波特率, N为每个符号承载的信息量.
比特率=波特率*单个调制状态对应的二进制位数.</p>
<p>在串口通信中, 传输码元(符号)就是比特(bit),
即波特率=比特率=时钟周期的数值</p>
<p>串口模式下, 若波特率是115200, 1秒钟只能传送 <span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="23.551ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 10409.6 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(500,0)"></path><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z" transform="translate(1000,0)"></path><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" transform="translate(1500,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(2000,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(2500,0)"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(3000,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path></g></g><g data-mml-node="mn" transform="translate(3500,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)"></path></g><g data-mml-node="mo" transform="translate(4777.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(5833.6,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(500,0)"></path><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z" transform="translate(1000,0)"></path><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" transform="translate(1500,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(2000,0)"></path></g><g data-mml-node="mi" transform="translate(8333.6,0)"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g><g data-mml-node="mi" transform="translate(9092.6,0)"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(9582.6,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mi" transform="translate(9943.6,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g></g></g></svg></mjx-container></span> 数据, 而不是 <span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="22.42ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 9909.6 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(500,0)"></path><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z" transform="translate(1000,0)"></path><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" transform="translate(1500,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(2000,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(2500,0)"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(3000,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path></g></g><g data-mml-node="mn" transform="translate(3500,0)"><path data-c="38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path></g><g data-mml-node="mo" transform="translate(4277.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(5333.6,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z" transform="translate(500,0)"></path><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z" transform="translate(1000,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(1500,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(2000,0)"></path></g><g data-mml-node="mi" transform="translate(7833.6,0)"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g><g data-mml-node="mi" transform="translate(8592.6,0)"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(9082.6,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mi" transform="translate(9443.6,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g></g></g></svg></mjx-container></span> 数据.</p>
<p>这是因为在网络传输的时候为了区别一个字节的开始和结束需要在每个字节前加一位0,
后面加一位1. 其中有8个b是表示数据, 另外2b是控制信息.
在串口模式下传送数据, 传送1Byte有效数据需要10位.</p>
<img src="/2025/08/20/Web%E4%BD%BF%E7%94%A8SerialPort%E8%B0%83%E7%94%A8%E4%B8%B2%E5%8F%A3/SerialPort1.png" class="" title="FPGA中的串口通信">
<h2 id="波特率怎么计算">波特率怎么计算</h2>
<p>假设系统时钟50M，波特率115200. 则传输1bit需要 <span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="19.506ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 8621.6 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(500,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path></g></g><g data-mml-node="mn" transform="translate(1000,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(500,0)"></path><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z" transform="translate(1000,0)"></path><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" transform="translate(1500,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(2000,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(2500,0)"></path></g><g data-mml-node="mi" transform="translate(4000,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></g><g data-mml-node="mo" transform="translate(4746.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(5802.6,0)"><path data-c="38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z" transform="translate(500,0)"></path><path data-c="36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z" transform="translate(778,0)"></path><path data-c="38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z" transform="translate(1278,0)"></path></g><g data-mml-node="mi" transform="translate(7580.6,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(8152.6,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></g></g></g></svg></mjx-container></span>。需要计数 <span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="21.979ex" height="2.52ex" role="img" focusable="false" viewBox="0 -864 9714.6 1114"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)"></path></g><g data-mml-node="mo" transform="translate(1222.2,0)"><path data-c="2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z"></path></g><g data-mml-node="msup" transform="translate(1944.4,0)"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)"></path></g><g data-mml-node="mn" transform="translate(1033,393.1) scale(0.707)"><path data-c="36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path></g></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(3381,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path></g></g><g data-mml-node="mn" transform="translate(3881,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(500,0)"></path><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z" transform="translate(1000,0)"></path><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" transform="translate(1500,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(2000,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(2500,0)"></path></g><g data-mml-node="mo" transform="translate(7158.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(8214.6,0)"><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z" transform="translate(500,0)"></path><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z" transform="translate(1000,0)"></path></g></g></g></svg></mjx-container></span>个。那么1Byte(串口传输格式为：1bit起始位+8bit数据位+1bit停止位)是不是循环计数10次434就可以传输完毕。</p>
<img src="/2025/08/20/Web%E4%BD%BF%E7%94%A8SerialPort%E8%B0%83%E7%94%A8%E4%B8%B2%E5%8F%A3/SerialPort2.png" class="" title="波特率计算">
<h2 id="什么时候去采样串口线上的数据">什么时候去采样串口线上的数据</h2>
<p>观察上图，Buad_Flag信号(通道2)表示了传输1Bit传输的间隔，每遇到1个Buad_Flag=1的信号，数据线上切换1次数据，所以两个Buad_Flag=1之间的数据是稳定的数据，根据抽样定理是不是应该在两个Buad_Flag=1信号的中间去采样数据呢，其实就是在1bit数据持续期间的中间点采样，才能得到最稳定的数据。</p>
<img src="/2025/08/20/Web%E4%BD%BF%E7%94%A8SerialPort%E8%B0%83%E7%94%A8%E4%B8%B2%E5%8F%A3/SerialPort3.png" class="">

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://freegostudio.github.io/2025/08/20/WPF%E5%85%A5%E9%97%A8-1-%E9%A1%B9%E7%9B%AE%E5%88%9B%E5%BB%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jacky Jiang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="废狗的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | 废狗的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/08/20/WPF%E5%85%A5%E9%97%A8-1-%E9%A1%B9%E7%9B%AE%E5%88%9B%E5%BB%BA/" class="post-title-link" itemprop="url">WPF入门-1.项目创建</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-08-20 12:13:00" itemprop="dateCreated datePublished" datetime="2025-08-20T12:13:00+08:00">2025-08-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/WPF/" itemprop="url" rel="index"><span itemprop="name">WPF</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="wpf-入门一项目创建">WPF 入门（一）：项目创建</h1>
<h2 id="创建新项目">1. 创建新项目</h2>
<ol type="1">
<li>打开 Visual Studio 2022，选择 <strong>创建新项目</strong>。</li>
<li>在搜索栏中输入 <code>WPF</code>，选择 <strong>WPF
应用程序</strong>。</li>
<li>输入项目名称（如：<code>WpfApp1</code>），选择项目位置，选择框架版本（如：<code>.NET 8.0</code>），点击
<strong>创建</strong>。</li>
</ol>
<h2 id="主要文件说明">2. 主要文件说明</h2>
<p>创建完成后，在解决方案资源管理器中可以看到如下主要文件：</p>
<table>
<colgroup>
<col style="width: 21%">
<col style="width: 78%">
</colgroup>
<thead>
<tr>
<th>文件名</th>
<th>作用说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>App.xaml</code></td>
<td>应用程序的入口，定义全局资源、应用程序级事件（如启动、退出），用于配置应用的整体行为。</td>
</tr>
<tr>
<td><code>AssemblyInfo.cs</code></td>
<td>包含程序集的元数据（如版本号、作者、描述等），用于描述和标识程序集。</td>
</tr>
<tr>
<td><code>MainWindow.xaml</code></td>
<td>主窗口的界面定义文件，负责应用启动后显示的主界面布局和控件声明。</td>
</tr>
</tbody>
</table>
<h2 id="运行项目">3. 运行项目</h2>
<p>运行项目，点击 <strong>F5</strong> 键或 <strong>调试</strong> &gt;
<strong>开始调试</strong>。</p>
<p>会出现一个窗口，显示 <code>MainWindow.xaml</code> 的内容。</p>
<h2 id="mainwindow.xaml中的内容">4. MainWindow.xaml中的内容</h2>
<p><code>MainWindow.xaml</code> 文件中的内容如下： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;Window x:Class="WpfApp1.MainWindow"</span><br><span class="line">        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span><br><span class="line">        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"</span><br><span class="line">        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"</span><br><span class="line">        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"</span><br><span class="line">        xmlns:local="clr-namespace:WpfApp1"</span><br><span class="line">        mc:Ignorable="d"</span><br><span class="line">        Title="MainWindow" Height="450" Width="800"&gt;</span><br><span class="line">    &lt;Grid&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/Grid&gt;</span><br><span class="line">&lt;/Window&gt;</span><br></pre></td></tr></table></figure>
<code>MainWindow.xaml</code> 文件是 WPF
应用程序的主窗口的界面定义文件。</p>
<p><code>&lt;Window&gt;</code>
标签定义了窗口的属性，如标题(Title)、高度(Height)、宽度(Width)等。</p>
<p><code>xmlns</code> 在 XAML 中的作用类似于 C# 的
using，都是为了让你能直接使用某个命名空间下的类型。
<code>xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"</code> 告诉
XAML 解析器，x 是一个命名空间前缀，用于引用 XAML 文件中的 XAML 元素,
<code>:x</code> 类似 C# 的别名。
<code>xmlns:local="clr-namespace:WpfApp1"</code>
表示当前窗口所在的命名空间。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://freegostudio.github.io/2023/11/30/%E7%8A%B6%E6%80%81%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jacky Jiang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="废狗的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | 废狗的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/11/30/%E7%8A%B6%E6%80%81%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">状态设计模式</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-11-30 23:48:39" itemprop="dateCreated datePublished" datetime="2023-11-30T23:48:39+08:00">2023-11-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-08-20 11:21:24" itemprop="dateModified" datetime="2025-08-20T11:21:24+08:00">2025-08-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">软件开发</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="state-design-pattern">State Design Pattern</h1>
<h2 id="需求">需求</h2>
<p>制作一个游戏中玩家操控的角色的动画控制器 <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IlNUQVRFIiBoZWlnaHQ9IjQ4MXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NjM5cHg7aGVpZ2h0OjQ4MXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDYzOSA0ODEiIHdpZHRoPSI2MzlweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMzUyODI7JiMzMzM5NDsmIzIyNTIyOyYjMjY0MTI7JiMyMTE2MDsmIzIwMzE2OzwvdGl0bGU+PGRlZnMvPjxnPjxnIGNsYXNzPSJ0aXRsZSIgZGF0YS1zb3VyY2UtbGluZT0iMSI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgzLjk5OTYiIHg9IjI3MC41MzQiIHk9IjIyLjk5NTEiPiYjMzUyODI7JiMzMzM5NDsmIzIyNTIyOyYjMjY0MTI7JiMyMTE2MDsmIzIwMzE2OzwvdGV4dD48L2c+PGcgaWQ9IklkbGUiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNTAiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNTAiIHg9IjE1Mi43OCIgeT0iMTcxLjI5NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxNTIuNzgiIHgyPSIyMDIuNzgiIHkxPSIxOTcuNTkzOCIgeTI9IjE5Ny41OTM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjUuNTE4NiIgeD0iMTY1LjAyMDciIHk9IjE4OS4yOTIiPklkbGU8L3RleHQ+PC9nPjxnIGlkPSJSdW4iPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNTAiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNTAiIHg9IjM4Ni43OCIgeT0iMTcxLjI5NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIzODYuNzgiIHgyPSI0MzYuNzgiIHkxPSIxOTcuNTkzOCIgeTI9IjE5Ny41OTM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjcuNDczNiIgeD0iMzk4LjA0MzIiIHk9IjE4OS4yOTIiPlJ1bjwvdGV4dD48L2c+PGcgaWQ9IlJpc2UiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNTAiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNTAiIHg9IjcuNzgiIHk9IjI5OC4yOTY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iNy43OCIgeDI9IjU3Ljc4IiB5MT0iMzI0LjU5MzgiIHkyPSIzMjQuNTkzOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI5LjUyNDQiIHg9IjE4LjAxNzgiIHk9IjMxNi4yOTIiPlJpc2U8L3RleHQ+PC9nPjxnIGlkPSJGYWxsIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjUwIiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjUwIiB4PSIxNTIuNzgiIHk9IjQyNS4yOTY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMTUyLjc4IiB4Mj0iMjAyLjc4IiB5MT0iNDUxLjU5MzgiIHkyPSI0NTEuNTkzOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI0LjQxMTEiIHg9IjE2NS41NzQ0IiB5PSI0NDMuMjkyIj5GYWxsPC90ZXh0PjwvZz48ZyBpZD0iQXR0YWNrIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjUwIiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjY0LjkzOTUiIHg9IjE0NS4zMSIgeT0iNDQuMjk2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjE0NS4zMSIgeDI9IjIxMC4yNDk1IiB5MT0iNzAuNTkzOCIgeTI9IjcwLjU5MzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0NC45Mzk1IiB4PSIxNTUuMzEiIHk9IjYyLjI5MiI+QXR0YWNrPC90ZXh0PjwvZz48ZWxsaXBzZSBjeD0iMTA3Ljc4IiBjeT0iMTk2LjI5NjkiIGZpbGw9IiMyMjIyMjIiIHJ4PSIxMCIgcnk9IjEwIiBzdHlsZT0ic3Ryb2tlOiMyMjIyMjI7c3Ryb2tlLXdpZHRoOjE7Ii8+PCEtLWxpbmsgKnN0YXJ0KiB0byBJZGxlLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9Ii5zdGFydC4iIGRhdGEtZW50aXR5LTI9IklkbGUiIGRhdGEtc291cmNlLWxpbmU9IjkiIGRhdGEtdWlkPSJsbmszIiBpZD0ibGlua18uc3RhcnQuX0lkbGUiPjxwYXRoIGQ9Ik0xMTguMTcsMTk2LjI5NjkgQzEyOS42NiwxOTYuMjk2OSAxMzUuMTUsMTk2LjI5NjkgMTQ2LjYzLDE5Ni4yOTY5IiBmaWxsPSJub25lIiBpZD0iKnN0YXJ0Ki10by1JZGxlIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxNTIuNjMsMTk2LjI5NjksMTQzLjYzLDE5Mi4yOTY5LDE0Ny42MywxOTYuMjk2OSwxNDMuNjMsMjAwLjI5NjksMTUyLjYzLDE5Ni4yOTY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1yZXZlcnNlIGxpbmsgQXR0YWNrIHRvIElkbGUtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iQXR0YWNrIiBkYXRhLWVudGl0eS0yPSJJZGxlIiBkYXRhLXNvdXJjZS1saW5lPSIxMCIgZGF0YS11aWQ9ImxuazUiIGlkPSJsaW5rX0F0dGFja19JZGxlIj48cGF0aCBkPSJNMTQwLjAyMzIsOTMuNTE0NCBDMTI4LjI3MzIsMTAyLjM5NDQgMTIxLjE2LDExMC40MjY5IDExNC43OCwxMjQuMjk2OSBDMTAzLjksMTQ3Ljk1NjkgMTMwLjQ1LDE2OS40NTY5IDE1Mi4zNywxODIuNDQ2OSIgZmlsbD0ibm9uZSIgaWQ9IkF0dGFjay1iYWNrdG8tSWRsZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTQ0LjgxLDg5Ljg5NjksMTM1LjIxODEsOTIuMTMyMSwxNDAuODIxLDkyLjkxMTUsMTQwLjA0MTYsOTguNTE0NCwxNDQuODEsODkuODk2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc4LjAwMDEiIHg9IjExNS43OCIgeT0iMTM3LjM2MzgiPiYjMzY3NTU7JiMyMDgzNzsmIzI1OTE1OyYjMjA5ODc7JiMyNTM1MTsmIzIwMTk2OzwvdGV4dD48L2c+PCEtLWxpbmsgQXR0YWNrIHRvIElkbGUtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iQXR0YWNrIiBkYXRhLWVudGl0eS0yPSJJZGxlIiBkYXRhLXNvdXJjZS1saW5lPSIxMSIgZGF0YS11aWQ9ImxuazYiIGlkPSJsaW5rX0F0dGFja19JZGxlIj48cGF0aCBkPSJNMTkwLjk4LDk0LjYzNjkgQzE5Ni44MSwxMDguMjA2OSAyMDEuNzQsMTI1LjUwNjkgMTk4Ljc4LDE0MS4yOTY5IEMxOTYuOTEsMTUxLjI4NjkgMTk1LjUzMjUsMTU2LjI1MjEgMTkxLjc4MjUsMTY1LjMyMjEiIGZpbGw9Im5vbmUiIGlkPSJBdHRhY2stdG8tSWRsZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTg5LjQ5LDE3MC44NjY5LDE5Ni42MjUzLDE2NC4wNzgsMTkxLjQwMDQsMTY2LjI0NjIsMTg5LjIzMjIsMTYxLjAyMTQsMTg5LjQ5LDE3MC44NjY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzguMDAwMSIgeD0iMjAwLjc4IiB5PSIxMzcuMzYzOCI+JiMyNTkxNTsmIzIwOTg3OyYjMjExNjA7JiMyMDMxNjsmIzIzNDM2OyYjMjUxMDQ7PC90ZXh0PjwvZz48IS0tbGluayBJZGxlIHRvIFJ1bi0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJJZGxlIiBkYXRhLWVudGl0eS0yPSJSdW4iIGRhdGEtc291cmNlLWxpbmU9IjEyIiBkYXRhLXVpZD0ibG5rNyIgaWQ9ImxpbmtfSWRsZV9SdW4iPjxwYXRoIGQ9Ik0yMDMuMjcsMTk2LjI5NjkgQzI0OC4yOCwxOTYuMjk2OSAzMzUuMzMsMTk2LjI5NjkgMzgwLjMyLDE5Ni4yOTY5IiBmaWxsPSJub25lIiBpZD0iSWRsZS10by1SdW4iIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjM4Ni4zMiwxOTYuMjk2OSwzNzcuMzIsMTkyLjI5NjksMzgxLjMyLDE5Ni4yOTY5LDM3Ny4zMiwyMDAuMjk2OSwzODYuMzIsMTk2LjI5NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDguMjg3NyIgeD0iMjIwLjc4IiB5PSIxODkuMzYzOCI+YWJzKHgmIzI2MDQxOyYjMjE1MjE7JiMzNjc1NTsmIzIwODM3OyYjMjA1NDA7KSZndDs9MC4xPC90ZXh0PjwvZz48IS0tbGluayBSdW4gdG8gSWRsZS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJSdW4iIGRhdGEtZW50aXR5LTI9IklkbGUiIGRhdGEtc291cmNlLWxpbmU9IjE0IiBkYXRhLXVpZD0ibG5rOSIgaWQ9ImxpbmtfUnVuX0lkbGUiPjxwYXRoIGQ9Ik0zODYuNzQsMjA5LjAyNjkgQzM3OS42NiwyMTIuMDE2OSAzNzEuODIsMjE0Ljc3NjkgMzY0LjI4LDIxNi4yOTY5IEMzMzQsMjIyLjQwNjkgMjU1LjU2LDIyMi40MDY5IDIyNS4yOCwyMTYuMjk2OSBDMjE3Ljc0LDIxNC43NzY5IDIxNS40MjczLDIxNC4zNTExIDIwOC4zNDczLDIxMS4zNjExIiBmaWxsPSJub25lIiBpZD0iUnVuLXRvLUlkbGUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjIwMi44MiwyMDkuMDI2OSwyMDkuNTU0OCwyMTYuMjEzMiwyMDcuNDI2MSwyMTAuOTcyMSwyMTIuNjY3MSwyMDguODQzNCwyMDIuODIsMjA5LjAyNjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzcuMzk1MSIgeD0iMjI2LjI4IiB5PSIyMTIuMzYzOCI+YWJzKHgmIzI2MDQxOyYjMjE1MjE7JiMzNjc1NTsmIzIwODM3OyYjMjA1NDA7KSZsdDswLjE8L3RleHQ+PC9nPjwhLS1saW5rIFJ1biB0byBSdW4tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iUnVuIiBkYXRhLWVudGl0eS0yPSJSdW4iIGRhdGEtc291cmNlLWxpbmU9IjEzIiBkYXRhLXVpZD0ibG5rOCIgaWQ9ImxpbmtfUnVuX1J1biI+PHBhdGggZD0iTTQzNy4wNiwxODUuNTU2OSBDNDU0LjU1LDE4Mi4yOTY5IDQ3MS43OCwxODUuODc2OSA0NzEuNzgsMTk2LjI5NjkgQzQ3MS43OCwyMDYuNzE2OSA0NjAuNDQ4NCwyMTEuMzk2MyA0NDIuOTU4NCwyMDguMTM2MyIgZmlsbD0ibm9uZSIgaWQ9IlJ1bi10by1SdW4iIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjQzNy4wNiwyMDcuMDM2OSw0NDUuMTc0NywyMTIuNjE4Myw0NDEuOTc1MywyMDcuOTUzMSw0NDYuNjQwNiwyMDQuNzUzNyw0MzcuMDYsMjA3LjAzNjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDguMjg3NyIgeD0iNDc3Ljc4IiB5PSIyMDAuODYzOCI+YWJzKHgmIzI2MDQxOyYjMjE1MjE7JiMzNjc1NTsmIzIwODM3OyYjMjA1NDA7KSZndDs9MC4xPC90ZXh0PjwvZz48IS0tbGluayBJZGxlIHRvIFJpc2UtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iSWRsZSIgZGF0YS1lbnRpdHktMj0iUmlzZSIgZGF0YS1zb3VyY2UtbGluZT0iMTUiIGRhdGEtdWlkPSJsbmsxMCIgaWQ9ImxpbmtfSWRsZV9SaXNlIj48cGF0aCBkPSJNMTUyLjY0LDIxMi4wOTY5IEMxNDcuMTMsMjE1LjIxNjkgMTQxLjMsMjE4LjQzNjkgMTM1Ljc4LDIyMS4yOTY5IEMxMDcuOSwyMzUuNzY2OSA5NC42OSwyMjkuODA2OSA3MS43OCwyNTEuMjk2OSBDNTguMDQsMjY0LjE4NjkgNTAuMzUxNywyNzcuNTIxMiA0My45MTE3LDI5Mi41NjEyIiBmaWxsPSJub25lIiBpZD0iSWRsZS10by1SaXNlIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI0MS41NSwyOTguMDc2OSw0OC43Njk3LDI5MS4zNzc5LDQzLjUxODEsMjkzLjQ4MDUsNDEuNDE1NSwyODguMjI4OSw0MS41NSwyOTguMDc2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc4LjAwMDEiIHg9IjcyLjc4IiB5PSIyNjQuMzYzOCI+JiMzNjc1NTsmIzIwODM3OyYjMzYzMzk7JiMzNjI5MTsmIzI1MzUxOyYjMjAxOTY7PC90ZXh0PjwvZz48IS0tbGluayBSaXNlIHRvIEZhbGwtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iUmlzZSIgZGF0YS1lbnRpdHktMj0iRmFsbCIgZGF0YS1zb3VyY2UtbGluZT0iMTYiIGRhdGEtdWlkPSJsbmsxMSIgaWQ9ImxpbmtfUmlzZV9GYWxsIj48cGF0aCBkPSJNMTcuNzksMzQ4LjU3NjkgQzEwLjgyLDM2My4yNjY5IDYsMzgxLjcyNjkgMTUuNzgsMzk1LjI5NjkgQzQ3LjE2LDQzOC44MjY5IDEwOS4xNTUsNDQ3LjU1MTUgMTQ2LjI5NSw0NDkuMDcxNSIgZmlsbD0ibm9uZSIgaWQ9IlJpc2UtdG8tRmFsbCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTUyLjI5LDQ0OS4zMTY5LDE0My40NjExLDQ0NC45NTIyLDE0Ny4yOTQyLDQ0OS4xMTI0LDE0My4xMzQsNDUyLjk0NTUsMTUyLjI5LDQ0OS4zMTY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM0Ljk1MTMiIHg9IjE2Ljc4IiB5PSIzOTEuMzYzOCI+JiMzNTI4MjsmIzMzMzk0O3kmIzM2NzI0OyYjMjYwNDE7JiMyMTUyMTsmIzM2ODk1OyYjMjQyMzA7Jmx0Oy0wLjE8L3RleHQ+PC9nPjwhLS1saW5rIEZhbGwgdG8gSWRsZS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJGYWxsIiBkYXRhLWVudGl0eS0yPSJJZGxlIiBkYXRhLXNvdXJjZS1saW5lPSIxNyIgZGF0YS11aWQ9ImxuazEyIiBpZD0ibGlua19GYWxsX0lkbGUiPjxwYXRoIGQ9Ik0yMDMuMiw0MzguNjc2OSBDMjUyLjczLDQxNi4zMzY5IDM1NC41NCwzNjEuMjg2OSAzMjEuNzgsMjk4LjI5NjkgQzI5Ni43NywyNTAuMjA2OSAyNDIuNzgwOCwyMjIuNTAwMiAyMDguNjAwOCwyMDguNjUwMiIgZmlsbD0ibm9uZSIgaWQ9IkZhbGwtdG8tSWRsZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjAzLjA0LDIwNi4zOTY5LDIwOS44NzksMjEzLjQ4NCwyMDcuNjc0LDIwOC4yNzQ2LDIxMi44ODM0LDIwNi4wNjk2LDIwMy4wNCwyMDYuMzk2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc4LjAwMDEiIHg9IjMyOC43OCIgeT0iMzI3Ljg2MzgiPiYjMzUyODI7JiMzMzM5NDsmIzI1NTA5OyYjMzUzMDI7JiMyMjMyMDsmIzM4NzU0OzwvdGV4dD48L2c+PCEtLWxpbmsgSWRsZSB0byBGYWxsLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9IklkbGUiIGRhdGEtZW50aXR5LTI9IkZhbGwiIGRhdGEtc291cmNlLWxpbmU9IjE4IiBkYXRhLXVpZD0ibG5rMTMiIGlkPSJsaW5rX0lkbGVfRmFsbCI+PHBhdGggZD0iTTE3Ny43OCwyMjEuNDU2OSBDMTc3Ljc4LDI2OS41MDY5IDE3Ny43OCwzNzAuNTQ2OSAxNzcuNzgsNDE4LjgzNjkiIGZpbGw9Im5vbmUiIGlkPSJJZGxlLXRvLUZhbGwiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE3Ny43OCw0MjQuODM2OSwxODEuNzgsNDE1LjgzNjksMTc3Ljc4LDQxOS44MzY5LDE3My43OCw0MTUuODM2OSwxNzcuNzgsNDI0LjgzNjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzQuOTUxMyIgeD0iMTc4Ljc4IiB5PSIzMjcuODYzOCI+JiMzNTI4MjsmIzMzMzk0O3kmIzM2NzI0OyYjMjYwNDE7JiMyMTUyMTsmIzM2ODk1OyYjMjQyMzA7Jmx0Oy0wLjE8L3RleHQ+PC9nPjwhLS1TUkM9W0F5YWlvS2JMVUI1eXFlbEVKS19keHRlc1B5dEpoWExGeml4WHVZZWtJSW45TFYxQ29LYzVDZURBeXMyaXA2QU9lNWpZSld3S3dMWElhZllTcFNLTGhITWhlNmk3cUdhWTU3SEIydTF5WUJJMmJTQUJWUEVWall2ekRjTnRxX1JUcHRoUWQtblVtV01McXVMZzBvZzJJNEZTeWRIVHB4RUUyTDJweDQzazAyZjhKMmhNZzdXc1JVVkoySENYMVp2anNBRGZQc2tXUHlXNUthMjJFZ1lETTFOUVdESDFCMFFQMkZHdHQwQ2xqY3otaVJxUHdXNm0zNFc5QTNuMElpMDFNbGJZeG5ROFlJeVJ2Wl9UalNuNjVzR1NNMGNJTG81Z2RfS2pWUjV5c1RDdjZyeEVOT0ltYVIxbjAwMDBdLS0+PC9nPjwvc3ZnPg=="></p>
<p>将以上状态变化用代码实现</p>
<ol type="1">
<li><p>需要定义一系列的状态 <figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">int</span> Idle = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">int</span> Run = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">int</span> Attack = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">int</span> Rise = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">int</span> Fall = <span class="number">4</span>;</span><br></pre></td></tr></table></figure></p></li>
<li><p>定义一个存储当前状态的变量 <figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="built_in">int</span> State = Idle;</span><br></pre></td></tr></table></figure></p></li>
<li><p>根据当前的状态, 执行该动作对应的效果 <figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> 动作：输入攻击指令</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">InputAttackCommand</span>()</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span> (State == Idle)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"播放Attack动画"</span>);</span><br><span class="line">        State = Attack;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Run)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"不能在奔跑时攻击"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Attack)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"不能在攻击时攻击"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Rise)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"不能在跳跃中攻击"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Fall)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"不能在下落中攻击"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> 动作：攻击动作完成</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">AttackActionComplete</span>()</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span> (State == Idle)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"当前不处于攻击中"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Run)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"当前不处于攻击中"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Attack)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"完成Idle动画"</span>);</span><br><span class="line">        State = Idle;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Rise)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"当前不处于攻击中"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Fall)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"当前不处于攻击中"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">......</span><br></pre></td></tr></table></figure></p></li>
<li><p>通过调用对应的动作就完成状态的转换了 <figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stateMachine.InputAttackCommand();</span><br></pre></td></tr></table></figure> 但是,
如果需要加入一个新的状态<code>Walk</code>, 则首先需要加入一个状态值
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">int</span> Walk = <span class="number">5</span>;</span><br></pre></td></tr></table></figure></p></li>
</ol>
<p>然后需要对所有的动作都需要加入一个新的状态的判断 <figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> 动作：输入攻击指令</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">InputAttackCommand</span>()</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span> (State == Idle)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"播放Attack动画"</span>);</span><br><span class="line">        State = Attack;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Run)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"不能在奔跑时攻击"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Attack)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"不能在攻击时攻击"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Rise)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"不能在跳跃中攻击"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Fall)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"不能在下落中攻击"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Walk)</span><br><span class="line">    {</span><br><span class="line">        <span class="comment">//行走的处理</span></span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> 动作：攻击动作完成</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">AttackActionComplete</span>()</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span> (State == Idle)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"当前不处于攻击中"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Run)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"当前不处于攻击中"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Attack)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"完成Idle动画"</span>);</span><br><span class="line">        State = Idle;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Rise)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"当前不处于攻击中"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Fall)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"当前不处于攻击中"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Walk)</span><br><span class="line">    {</span><br><span class="line">        <span class="comment">//行走的处理</span></span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">......</span><br></pre></td></tr></table></figure></p>
<p>很明显这并没有遵守<code>开放-关闭原则</code>,
也不符合面向对象的设计.</p>
<h2 id="改进">改进</h2>
<p>因此, 需要改进代码: 1. 定义一个IState接口,
在这个接口内间每个动作都有一个对应的方法. 2. 为每个状态实现一个状态类.
这些类将负责在对应状态下进行的行为. 3.
将状态对应的动作逻辑写入这些方法中.</p>
<h3 id="类图">类图</h3>
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjM5OHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MTU1NHB4O2hlaWdodDozOThweDtiYWNrZ3JvdW5kOiNGRkZGRkY7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxNTU0IDM5OCIgd2lkdGg9IjE1NTRweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbGFzcyBJU3RhdGUtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iSVN0YXRlIiBkYXRhLXNvdXJjZS1saW5lPSIxIiBkYXRhLXVpZD0iZW50MDAwMiIgaWQ9ImVudGl0eV9JU3RhdGUiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTYyLjA3ODEiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjI2Ni4xMTIzIiB4PSI2NDQiIHk9IjciLz48ZWxsaXBzZSBjeD0iNzUyLjIxMjkiIGN5PSIyMyIgZmlsbD0iI0I0QTdFNSIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNNzQ4LjEzNDgsMTguNzY1NiBMNzQ4LjEzNDgsMTYuNjA5NCBMNzU1LjUyNTQsMTYuNjA5NCBMNzU1LjUyNTQsMTguNzY1NiBMNzUzLjA1NjYsMTguNzY1NiBMNzUzLjA1NjYsMjYuODQzOCBMNzU1LjUyNTQsMjYuODQzOCBMNzU1LjUyNTQsMjkgTDc0OC4xMzQ4LDI5IEw3NDguMTM0OCwyNi44NDM4IEw3NTAuNjAzNSwyNi44NDM4IEw3NTAuNjAzNSwxOC43NjU2IEw3NDguMTM0OCwxOC43NjU2IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtc3R5bGU9Iml0YWxpYyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MS4xODY1IiB4PSI3NzIuNzEyOSIgeT0iMjcuODQ2NyI+SVN0YXRlPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjY0NSIgeDI9IjkwOS4xMTIzIiB5MT0iMzkiIHkyPSIzOSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjY0NSIgeDI9IjkwOS4xMTIzIiB5MT0iNDciIHkyPSI0NyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIwMi44NjMzIiB4PSI2NTAiIHk9IjYzLjk5NTEiPnZvaWQgSW5wdXRBdHRhY2tDb21tYW5kKCk7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIwNi4yMTk3IiB4PSI2NTAiIHk9IjgwLjI5MiI+dm9pZCBBdHRhY2tBY3Rpb25Db21wbGV0ZSgpOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMzkuMjcxNSIgeD0iNjUwIiB5PSI5Ni41ODg5Ij52b2lkIElucHV0WFRoYW5UaHJlc2hvbGRWYWx1ZSgpOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMzUuMzk1NSIgeD0iNjUwIiB5PSIxMTIuODg1NyI+dm9pZCBJbnB1dFhMZXNzVGhyZXNob2xkVmFsdWUoKTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTkzLjQ1MDIiIHg9IjY1MCIgeT0iMTI5LjE4MjYiPnZvaWQgSW5wdXRKdW1wQ29tbWFuZCgpOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNTQuMTEyMyIgeD0iNjUwIiB5PSIxNDUuNDc5NSI+dm9pZCBZVmVsb2NpdHlMZXNzVGhyZXNob2xkVmFsdWUoKTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTk5Ljc5MzkiIHg9IjY1MCIgeT0iMTYxLjc3NjQiPnZvaWQgQ2hhcmFjdGVyVG91Y2hQbGFuZSgpOzwvdGV4dD48L2c+PCEtLWNsYXNzIElkbGVTdGF0ZS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJJZGxlU3RhdGUiIGRhdGEtc291cmNlLWxpbmU9IjExIiBkYXRhLXVpZD0iZW50MDAwMyIgaWQ9ImVudGl0eV9JZGxlU3RhdGUiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTYyLjA3ODEiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjI4MC4xMTIzIiB4PSI3IiB5PSIyMjkuMDgiLz48ZWxsaXBzZSBjeD0iMTExLjUxODEiIGN5PSIyNDUuMDgiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTExNC40ODY4LDI1MC43MjA2IFExMTMuOTA4NywyNTEuMDE3NSAxMTMuMjY4MSwyNTEuMTU4MSBRMTEyLjYyNzQsMjUxLjMxNDQgMTExLjkyNDMsMjUxLjMxNDQgUTEwOS40MjQzLDI1MS4zMTQ0IDEwOC4wOTYyLDI0OS42NzM4IFExMDYuNzgzNywyNDguMDE3NSAxMDYuNzgzNywyNDQuODkyNSBRMTA2Ljc4MzcsMjQxLjc2NzUgMTA4LjA5NjIsMjQwLjExMTMgUTEwOS40MjQzLDIzOC40NTUgMTExLjkyNDMsMjM4LjQ1NSBRMTEyLjYyNzQsMjM4LjQ1NSAxMTMuMjY4MSwyMzguNjExMyBRMTEzLjkyNDMsMjM4Ljc2NzUgMTE0LjQ4NjgsMjM5LjA2NDQgTDExNC40ODY4LDI0MS43ODMxIFExMTMuODYxOCwyNDEuMjA1IDExMy4yNjgxLDI0MC45Mzk0IFExMTIuNjc0MywyNDAuNjU4MSAxMTIuMDQ5MywyNDAuNjU4MSBRMTEwLjcwNTYsMjQwLjY1ODEgMTEwLjAxODEsMjQxLjczNjMgUTEwOS4zMzA2LDI0Mi43OTg4IDEwOS4zMzA2LDI0NC44OTI1IFExMDkuMzMwNiwyNDYuOTg2MyAxMTAuMDE4MSwyNDguMDY0NCBRMTEwLjcwNTYsMjQ5LjEyNjkgMTEyLjA0OTMsMjQ5LjEyNjkgUTExMi42NzQzLDI0OS4xMjY5IDExMy4yNjgxLDI0OC44NjEzIFExMTMuODYxOCwyNDguNTggMTE0LjQ4NjgsMjQ4LjAwMTkgTDExNC40ODY4LDI1MC43MjA2IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjIuNTc2MiIgeD0iMTMyLjAxODEiIHk9IjI0OS45MjY3Ij5JZGxlU3RhdGU8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iOCIgeDI9IjI4Ni4xMTIzIiB5MT0iMjYxLjA4IiB5Mj0iMjYxLjA4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iOCIgeDI9IjI4Ni4xMTIzIiB5MT0iMjY5LjA4IiB5Mj0iMjY5LjA4Ii8+PGVsbGlwc2UgY3g9IjE4IiBjeT0iMjgyLjcyODQiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIwMi44NjMzIiB4PSIyNyIgeT0iMjg2LjA3NTEiPnZvaWQgSW5wdXRBdHRhY2tDb21tYW5kKCk7PC90ZXh0PjxlbGxpcHNlIGN4PSIxOCIgY3k9IjI5OS4wMjUzIiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMDYuMjE5NyIgeD0iMjciIHk9IjMwMi4zNzIiPnZvaWQgQXR0YWNrQWN0aW9uQ29tcGxldGUoKTs8L3RleHQ+PGVsbGlwc2UgY3g9IjE4IiBjeT0iMzE1LjMyMjIiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIzOS4yNzE1IiB4PSIyNyIgeT0iMzE4LjY2ODkiPnZvaWQgSW5wdXRYVGhhblRocmVzaG9sZFZhbHVlKCk7PC90ZXh0PjxlbGxpcHNlIGN4PSIxOCIgY3k9IjMzMS42MTkxIiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMzUuMzk1NSIgeD0iMjciIHk9IjMzNC45NjU3Ij52b2lkIElucHV0WExlc3NUaHJlc2hvbGRWYWx1ZSgpOzwvdGV4dD48ZWxsaXBzZSBjeD0iMTgiIGN5PSIzNDcuOTE1OSIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTkzLjQ1MDIiIHg9IjI3IiB5PSIzNTEuMjYyNiI+dm9pZCBJbnB1dEp1bXBDb21tYW5kKCk7PC90ZXh0PjxlbGxpcHNlIGN4PSIxOCIgY3k9IjM2NC4yMTI4IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNTQuMTEyMyIgeD0iMjciIHk9IjM2Ny41NTk1Ij52b2lkIFlWZWxvY2l0eUxlc3NUaHJlc2hvbGRWYWx1ZSgpOzwvdGV4dD48ZWxsaXBzZSBjeD0iMTgiIGN5PSIzODAuNTA5NyIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTk5Ljc5MzkiIHg9IjI3IiB5PSIzODMuODU2NCI+dm9pZCBDaGFyYWN0ZXJUb3VjaFBsYW5lKCk7PC90ZXh0PjwvZz48IS0tY2xhc3MgUnVuU3RhdGUtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iUnVuU3RhdGUiIGRhdGEtc291cmNlLWxpbmU9IjIxIiBkYXRhLXVpZD0iZW50MDAwNCIgaWQ9ImVudGl0eV9SdW5TdGF0ZSI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxNjIuMDc4MSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMjgwLjExMjMiIHg9IjMyMiIgeT0iMjI5LjA4Ii8+PGVsbGlwc2UgY3g9IjQyNS41NDA1IiBjeT0iMjQ1LjA4IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik00MjguNTA5MywyNTAuNzIwNiBRNDI3LjkzMTIsMjUxLjAxNzUgNDI3LjI5MDUsMjUxLjE1ODEgUTQyNi42NDk5LDI1MS4zMTQ0IDQyNS45NDY4LDI1MS4zMTQ0IFE0MjMuNDQ2OCwyNTEuMzE0NCA0MjIuMTE4NywyNDkuNjczOCBRNDIwLjgwNjIsMjQ4LjAxNzUgNDIwLjgwNjIsMjQ0Ljg5MjUgUTQyMC44MDYyLDI0MS43Njc1IDQyMi4xMTg3LDI0MC4xMTEzIFE0MjMuNDQ2OCwyMzguNDU1IDQyNS45NDY4LDIzOC40NTUgUTQyNi42NDk5LDIzOC40NTUgNDI3LjI5MDUsMjM4LjYxMTMgUTQyNy45NDY4LDIzOC43Njc1IDQyOC41MDkzLDIzOS4wNjQ0IEw0MjguNTA5MywyNDEuNzgzMSBRNDI3Ljg4NDMsMjQxLjIwNSA0MjcuMjkwNSwyNDAuOTM5NCBRNDI2LjY5NjgsMjQwLjY1ODEgNDI2LjA3MTgsMjQwLjY1ODEgUTQyNC43MjgsMjQwLjY1ODEgNDI0LjA0MDUsMjQxLjczNjMgUTQyMy4zNTMsMjQyLjc5ODggNDIzLjM1MywyNDQuODkyNSBRNDIzLjM1MywyNDYuOTg2MyA0MjQuMDQwNSwyNDguMDY0NCBRNDI0LjcyOCwyNDkuMTI2OSA0MjYuMDcxOCwyNDkuMTI2OSBRNDI2LjY5NjgsMjQ5LjEyNjkgNDI3LjI5MDUsMjQ4Ljg2MTMgUTQyNy44ODQzLDI0OC41OCA0MjguNTA5MywyNDguMDAxOSBMNDI4LjUwOTMsMjUwLjcyMDYgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2NC41MzEzIiB4PSI0NDYuMDQwNSIgeT0iMjQ5LjkyNjciPlJ1blN0YXRlPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjMyMyIgeDI9IjYwMS4xMTIzIiB5MT0iMjYxLjA4IiB5Mj0iMjYxLjA4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMzIzIiB4Mj0iNjAxLjExMjMiIHkxPSIyNjkuMDgiIHkyPSIyNjkuMDgiLz48ZWxsaXBzZSBjeD0iMzMzIiBjeT0iMjgyLjcyODQiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIwMi44NjMzIiB4PSIzNDIiIHk9IjI4Ni4wNzUxIj52b2lkIElucHV0QXR0YWNrQ29tbWFuZCgpOzwvdGV4dD48ZWxsaXBzZSBjeD0iMzMzIiBjeT0iMjk5LjAyNTMiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIwNi4yMTk3IiB4PSIzNDIiIHk9IjMwMi4zNzIiPnZvaWQgQXR0YWNrQWN0aW9uQ29tcGxldGUoKTs8L3RleHQ+PGVsbGlwc2UgY3g9IjMzMyIgY3k9IjMxNS4zMjIyIiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMzkuMjcxNSIgeD0iMzQyIiB5PSIzMTguNjY4OSI+dm9pZCBJbnB1dFhUaGFuVGhyZXNob2xkVmFsdWUoKTs8L3RleHQ+PGVsbGlwc2UgY3g9IjMzMyIgY3k9IjMzMS42MTkxIiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMzUuMzk1NSIgeD0iMzQyIiB5PSIzMzQuOTY1NyI+dm9pZCBJbnB1dFhMZXNzVGhyZXNob2xkVmFsdWUoKTs8L3RleHQ+PGVsbGlwc2UgY3g9IjMzMyIgY3k9IjM0Ny45MTU5IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxOTMuNDUwMiIgeD0iMzQyIiB5PSIzNTEuMjYyNiI+dm9pZCBJbnB1dEp1bXBDb21tYW5kKCk7PC90ZXh0PjxlbGxpcHNlIGN4PSIzMzMiIGN5PSIzNjQuMjEyOCIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjU0LjExMjMiIHg9IjM0MiIgeT0iMzY3LjU1OTUiPnZvaWQgWVZlbG9jaXR5TGVzc1RocmVzaG9sZFZhbHVlKCk7PC90ZXh0PjxlbGxpcHNlIGN4PSIzMzMiIGN5PSIzODAuNTA5NyIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTk5Ljc5MzkiIHg9IjM0MiIgeT0iMzgzLjg1NjQiPnZvaWQgQ2hhcmFjdGVyVG91Y2hQbGFuZSgpOzwvdGV4dD48L2c+PCEtLWNsYXNzIEF0dGFja1N0YXRlLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkF0dGFja1N0YXRlIiBkYXRhLXNvdXJjZS1saW5lPSIzMSIgZGF0YS11aWQ9ImVudDAwMDUiIGlkPSJlbnRpdHlfQXR0YWNrU3RhdGUiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTYyLjA3ODEiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjI4MC4xMTIzIiB4PSI2MzciIHk9IjIyOS4wOCIvPjxlbGxpcHNlIGN4PSI3MzEuODA3NiIgY3k9IjI0NS4wOCIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNNzM0Ljc3NjQsMjUwLjcyMDYgUTczNC4xOTgyLDI1MS4wMTc1IDczMy41NTc2LDI1MS4xNTgxIFE3MzIuOTE3LDI1MS4zMTQ0IDczMi4yMTM5LDI1MS4zMTQ0IFE3MjkuNzEzOSwyNTEuMzE0NCA3MjguMzg1NywyNDkuNjczOCBRNzI3LjA3MzIsMjQ4LjAxNzUgNzI3LjA3MzIsMjQ0Ljg5MjUgUTcyNy4wNzMyLDI0MS43Njc1IDcyOC4zODU3LDI0MC4xMTEzIFE3MjkuNzEzOSwyMzguNDU1IDczMi4yMTM5LDIzOC40NTUgUTczMi45MTcsMjM4LjQ1NSA3MzMuNTU3NiwyMzguNjExMyBRNzM0LjIxMzksMjM4Ljc2NzUgNzM0Ljc3NjQsMjM5LjA2NDQgTDczNC43NzY0LDI0MS43ODMxIFE3MzQuMTUxNCwyNDEuMjA1IDczMy41NTc2LDI0MC45Mzk0IFE3MzIuOTYzOSwyNDAuNjU4MSA3MzIuMzM4OSwyNDAuNjU4MSBRNzMwLjk5NTEsMjQwLjY1ODEgNzMwLjMwNzYsMjQxLjczNjMgUTcyOS42MjAxLDI0Mi43OTg4IDcyOS42MjAxLDI0NC44OTI1IFE3MjkuNjIwMSwyNDYuOTg2MyA3MzAuMzA3NiwyNDguMDY0NCBRNzMwLjk5NTEsMjQ5LjEyNjkgNzMyLjMzODksMjQ5LjEyNjkgUTczMi45NjM5LDI0OS4xMjY5IDczMy41NTc2LDI0OC44NjEzIFE3MzQuMTUxNCwyNDguNTggNzM0Ljc3NjQsMjQ4LjAwMTkgTDczNC43NzY0LDI1MC43MjA2IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODEuOTk3MSIgeD0iNzUyLjMwNzYiIHk9IjI0OS45MjY3Ij5BdHRhY2tTdGF0ZTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI2MzgiIHgyPSI5MTYuMTEyMyIgeTE9IjI2MS4wOCIgeTI9IjI2MS4wOCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjYzOCIgeDI9IjkxNi4xMTIzIiB5MT0iMjY5LjA4IiB5Mj0iMjY5LjA4Ii8+PGVsbGlwc2UgY3g9IjY0OCIgY3k9IjI4Mi43Mjg0IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMDIuODYzMyIgeD0iNjU3IiB5PSIyODYuMDc1MSI+dm9pZCBJbnB1dEF0dGFja0NvbW1hbmQoKTs8L3RleHQ+PGVsbGlwc2UgY3g9IjY0OCIgY3k9IjI5OS4wMjUzIiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMDYuMjE5NyIgeD0iNjU3IiB5PSIzMDIuMzcyIj52b2lkIEF0dGFja0FjdGlvbkNvbXBsZXRlKCk7PC90ZXh0PjxlbGxpcHNlIGN4PSI2NDgiIGN5PSIzMTUuMzIyMiIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjM5LjI3MTUiIHg9IjY1NyIgeT0iMzE4LjY2ODkiPnZvaWQgSW5wdXRYVGhhblRocmVzaG9sZFZhbHVlKCk7PC90ZXh0PjxlbGxpcHNlIGN4PSI2NDgiIGN5PSIzMzEuNjE5MSIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjM1LjM5NTUiIHg9IjY1NyIgeT0iMzM0Ljk2NTciPnZvaWQgSW5wdXRYTGVzc1RocmVzaG9sZFZhbHVlKCk7PC90ZXh0PjxlbGxpcHNlIGN4PSI2NDgiIGN5PSIzNDcuOTE1OSIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTkzLjQ1MDIiIHg9IjY1NyIgeT0iMzUxLjI2MjYiPnZvaWQgSW5wdXRKdW1wQ29tbWFuZCgpOzwvdGV4dD48ZWxsaXBzZSBjeD0iNjQ4IiBjeT0iMzY0LjIxMjgiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI1NC4xMTIzIiB4PSI2NTciIHk9IjM2Ny41NTk1Ij52b2lkIFlWZWxvY2l0eUxlc3NUaHJlc2hvbGRWYWx1ZSgpOzwvdGV4dD48ZWxsaXBzZSBjeD0iNjQ4IiBjeT0iMzgwLjUwOTciIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE5OS43OTM5IiB4PSI2NTciIHk9IjM4My44NTY0Ij52b2lkIENoYXJhY3RlclRvdWNoUGxhbmUoKTs8L3RleHQ+PC9nPjwhLS1jbGFzcyBSaXNlU3RhdGUtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iUmlzZVN0YXRlIiBkYXRhLXNvdXJjZS1saW5lPSI0MSIgZGF0YS11aWQ9ImVudDAwMDYiIGlkPSJlbnRpdHlfUmlzZVN0YXRlIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjE2Mi4wNzgxIiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIyODAuMTEyMyIgeD0iOTUyIiB5PSIyMjkuMDgiLz48ZWxsaXBzZSBjeD0iMTA1NC41MTUxIiBjeT0iMjQ1LjA4IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0xMDU3LjQ4MzksMjUwLjcyMDYgUTEwNTYuOTA1OCwyNTEuMDE3NSAxMDU2LjI2NTEsMjUxLjE1ODEgUTEwNTUuNjI0NSwyNTEuMzE0NCAxMDU0LjkyMTQsMjUxLjMxNDQgUTEwNTIuNDIxNCwyNTEuMzE0NCAxMDUxLjA5MzMsMjQ5LjY3MzggUTEwNDkuNzgwOCwyNDguMDE3NSAxMDQ5Ljc4MDgsMjQ0Ljg5MjUgUTEwNDkuNzgwOCwyNDEuNzY3NSAxMDUxLjA5MzMsMjQwLjExMTMgUTEwNTIuNDIxNCwyMzguNDU1IDEwNTQuOTIxNCwyMzguNDU1IFExMDU1LjYyNDUsMjM4LjQ1NSAxMDU2LjI2NTEsMjM4LjYxMTMgUTEwNTYuOTIxNCwyMzguNzY3NSAxMDU3LjQ4MzksMjM5LjA2NDQgTDEwNTcuNDgzOSwyNDEuNzgzMSBRMTA1Ni44NTg5LDI0MS4yMDUgMTA1Ni4yNjUxLDI0MC45Mzk0IFExMDU1LjY3MTQsMjQwLjY1ODEgMTA1NS4wNDY0LDI0MC42NTgxIFExMDUzLjcwMjYsMjQwLjY1ODEgMTA1My4wMTUxLDI0MS43MzYzIFExMDUyLjMyNzYsMjQyLjc5ODggMTA1Mi4zMjc2LDI0NC44OTI1IFExMDUyLjMyNzYsMjQ2Ljk4NjMgMTA1My4wMTUxLDI0OC4wNjQ0IFExMDUzLjcwMjYsMjQ5LjEyNjkgMTA1NS4wNDY0LDI0OS4xMjY5IFExMDU1LjY3MTQsMjQ5LjEyNjkgMTA1Ni4yNjUxLDI0OC44NjEzIFExMDU2Ljg1ODksMjQ4LjU4IDEwNTcuNDgzOSwyNDguMDAxOSBMMTA1Ny40ODM5LDI1MC43MjA2IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjYuNTgyIiB4PSIxMDc1LjAxNTEiIHk9IjI0OS45MjY3Ij5SaXNlU3RhdGU8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iOTUzIiB4Mj0iMTIzMS4xMTIzIiB5MT0iMjYxLjA4IiB5Mj0iMjYxLjA4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iOTUzIiB4Mj0iMTIzMS4xMTIzIiB5MT0iMjY5LjA4IiB5Mj0iMjY5LjA4Ii8+PGVsbGlwc2UgY3g9Ijk2MyIgY3k9IjI4Mi43Mjg0IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMDIuODYzMyIgeD0iOTcyIiB5PSIyODYuMDc1MSI+dm9pZCBJbnB1dEF0dGFja0NvbW1hbmQoKTs8L3RleHQ+PGVsbGlwc2UgY3g9Ijk2MyIgY3k9IjI5OS4wMjUzIiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMDYuMjE5NyIgeD0iOTcyIiB5PSIzMDIuMzcyIj52b2lkIEF0dGFja0FjdGlvbkNvbXBsZXRlKCk7PC90ZXh0PjxlbGxpcHNlIGN4PSI5NjMiIGN5PSIzMTUuMzIyMiIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjM5LjI3MTUiIHg9Ijk3MiIgeT0iMzE4LjY2ODkiPnZvaWQgSW5wdXRYVGhhblRocmVzaG9sZFZhbHVlKCk7PC90ZXh0PjxlbGxpcHNlIGN4PSI5NjMiIGN5PSIzMzEuNjE5MSIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjM1LjM5NTUiIHg9Ijk3MiIgeT0iMzM0Ljk2NTciPnZvaWQgSW5wdXRYTGVzc1RocmVzaG9sZFZhbHVlKCk7PC90ZXh0PjxlbGxpcHNlIGN4PSI5NjMiIGN5PSIzNDcuOTE1OSIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTkzLjQ1MDIiIHg9Ijk3MiIgeT0iMzUxLjI2MjYiPnZvaWQgSW5wdXRKdW1wQ29tbWFuZCgpOzwvdGV4dD48ZWxsaXBzZSBjeD0iOTYzIiBjeT0iMzY0LjIxMjgiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI1NC4xMTIzIiB4PSI5NzIiIHk9IjM2Ny41NTk1Ij52b2lkIFlWZWxvY2l0eUxlc3NUaHJlc2hvbGRWYWx1ZSgpOzwvdGV4dD48ZWxsaXBzZSBjeD0iOTYzIiBjeT0iMzgwLjUwOTciIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE5OS43OTM5IiB4PSI5NzIiIHk9IjM4My44NTY0Ij52b2lkIENoYXJhY3RlclRvdWNoUGxhbmUoKTs8L3RleHQ+PC9nPjwhLS1jbGFzcyBGYWxsU3RhdGUtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iRmFsbFN0YXRlIiBkYXRhLXNvdXJjZS1saW5lPSI1MSIgZGF0YS11aWQ9ImVudDAwMDciIGlkPSJlbnRpdHlfRmFsbFN0YXRlIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjE2Mi4wNzgxIiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIyODAuMTEyMyIgeD0iMTI2NyIgeT0iMjI5LjA4Ii8+PGVsbGlwc2UgY3g9IjEzNzIuMDcxOCIgY3k9IjI0NS4wOCIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMTM3NS4wNDA1LDI1MC43MjA2IFExMzc0LjQ2MjQsMjUxLjAxNzUgMTM3My44MjE4LDI1MS4xNTgxIFExMzczLjE4MTIsMjUxLjMxNDQgMTM3Mi40NzgsMjUxLjMxNDQgUTEzNjkuOTc4LDI1MS4zMTQ0IDEzNjguNjQ5OSwyNDkuNjczOCBRMTM2Ny4zMzc0LDI0OC4wMTc1IDEzNjcuMzM3NCwyNDQuODkyNSBRMTM2Ny4zMzc0LDI0MS43Njc1IDEzNjguNjQ5OSwyNDAuMTExMyBRMTM2OS45NzgsMjM4LjQ1NSAxMzcyLjQ3OCwyMzguNDU1IFExMzczLjE4MTIsMjM4LjQ1NSAxMzczLjgyMTgsMjM4LjYxMTMgUTEzNzQuNDc4LDIzOC43Njc1IDEzNzUuMDQwNSwyMzkuMDY0NCBMMTM3NS4wNDA1LDI0MS43ODMxIFExMzc0LjQxNTUsMjQxLjIwNSAxMzczLjgyMTgsMjQwLjkzOTQgUTEzNzMuMjI4LDI0MC42NTgxIDEzNzIuNjAzLDI0MC42NTgxIFExMzcxLjI1OTMsMjQwLjY1ODEgMTM3MC41NzE4LDI0MS43MzYzIFExMzY5Ljg4NDMsMjQyLjc5ODggMTM2OS44ODQzLDI0NC44OTI1IFExMzY5Ljg4NDMsMjQ2Ljk4NjMgMTM3MC41NzE4LDI0OC4wNjQ0IFExMzcxLjI1OTMsMjQ5LjEyNjkgMTM3Mi42MDMsMjQ5LjEyNjkgUTEzNzMuMjI4LDI0OS4xMjY5IDEzNzMuODIxOCwyNDguODYxMyBRMTM3NC40MTU1LDI0OC41OCAxMzc1LjA0MDUsMjQ4LjAwMTkgTDEzNzUuMDQwNSwyNTAuNzIwNiBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYxLjQ2ODgiIHg9IjEzOTIuNTcxOCIgeT0iMjQ5LjkyNjciPkZhbGxTdGF0ZTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxMjY4IiB4Mj0iMTU0Ni4xMTIzIiB5MT0iMjYxLjA4IiB5Mj0iMjYxLjA4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMTI2OCIgeDI9IjE1NDYuMTEyMyIgeTE9IjI2OS4wOCIgeTI9IjI2OS4wOCIvPjxlbGxpcHNlIGN4PSIxMjc4IiBjeT0iMjgyLjcyODQiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIwMi44NjMzIiB4PSIxMjg3IiB5PSIyODYuMDc1MSI+dm9pZCBJbnB1dEF0dGFja0NvbW1hbmQoKTs8L3RleHQ+PGVsbGlwc2UgY3g9IjEyNzgiIGN5PSIyOTkuMDI1MyIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjA2LjIxOTciIHg9IjEyODciIHk9IjMwMi4zNzIiPnZvaWQgQXR0YWNrQWN0aW9uQ29tcGxldGUoKTs8L3RleHQ+PGVsbGlwc2UgY3g9IjEyNzgiIGN5PSIzMTUuMzIyMiIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjM5LjI3MTUiIHg9IjEyODciIHk9IjMxOC42Njg5Ij52b2lkIElucHV0WFRoYW5UaHJlc2hvbGRWYWx1ZSgpOzwvdGV4dD48ZWxsaXBzZSBjeD0iMTI3OCIgY3k9IjMzMS42MTkxIiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMzUuMzk1NSIgeD0iMTI4NyIgeT0iMzM0Ljk2NTciPnZvaWQgSW5wdXRYTGVzc1RocmVzaG9sZFZhbHVlKCk7PC90ZXh0PjxlbGxpcHNlIGN4PSIxMjc4IiBjeT0iMzQ3LjkxNTkiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE5My40NTAyIiB4PSIxMjg3IiB5PSIzNTEuMjYyNiI+dm9pZCBJbnB1dEp1bXBDb21tYW5kKCk7PC90ZXh0PjxlbGxpcHNlIGN4PSIxMjc4IiBjeT0iMzY0LjIxMjgiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI1NC4xMTIzIiB4PSIxMjg3IiB5PSIzNjcuNTU5NSI+dm9pZCBZVmVsb2NpdHlMZXNzVGhyZXNob2xkVmFsdWUoKTs8L3RleHQ+PGVsbGlwc2UgY3g9IjEyNzgiIGN5PSIzODAuNTA5NyIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTk5Ljc5MzkiIHg9IjEyODciIHk9IjM4My44NTY0Ij52b2lkIENoYXJhY3RlclRvdWNoUGxhbmUoKTs8L3RleHQ+PC9nPjwhLS1yZXZlcnNlIGxpbmsgSVN0YXRlIHRvIElkbGVTdGF0ZS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJJU3RhdGUiIGRhdGEtZW50aXR5LTI9IklkbGVTdGF0ZSIgZGF0YS1zb3VyY2UtbGluZT0iNjEiIGRhdGEtdWlkPSJsbms4IiBpZD0ibGlua19JU3RhdGVfSWRsZVN0YXRlIj48cGF0aCBjb2RlTGluZT0iNjEiIGQ9Ik02MjYuMTczOSwxMjYuMDg3MyBDNTMwLjE5MzksMTUxLjE0NzMgNDE1LjkxLDE4NC40NSAzMDQuMDYsMjI5LjA4IEMyOTguNTIsMjMxLjI5IDI5Mi45MSwyMzMuNjMgMjg3LjI3LDIzNi4wNyIgZmlsbD0ibm9uZSIgaWQ9IklTdGF0ZS1iYWNrdG8tSWRsZVN0YXRlIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0ibm9uZSIgcG9pbnRzPSI2NDMuNTksMTIxLjU0LDYyNC42NTgxLDEyMC4yODE5LDYyNy42ODk2LDEzMS44OTI3LDY0My41OSwxMjEuNTQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLXJldmVyc2UgbGluayBJU3RhdGUgdG8gUnVuU3RhdGUtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iSVN0YXRlIiBkYXRhLWVudGl0eS0yPSJSdW5TdGF0ZSIgZGF0YS1zb3VyY2UtbGluZT0iNjIiIGRhdGEtdWlkPSJsbms5IiBpZD0ibGlua19JU3RhdGVfUnVuU3RhdGUiPjxwYXRoIGNvZGVMaW5lPSI2MiIgZD0iTTY0Ny4yNDM4LDE3OS43MzggQzYxOS42NDM4LDE5OS4wMTggNjA0LjkzLDIwOS4zIDU3Ny4zMywyMjguNTgiIGZpbGw9Im5vbmUiIGlkPSJJU3RhdGUtYmFja3RvLVJ1blN0YXRlIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0ibm9uZSIgcG9pbnRzPSI2NjIsMTY5LjQzLDY0My44MDc4LDE3NC44MTkyLDY1MC42Nzk4LDE4NC42NTY3LDY2MiwxNjkuNDMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLXJldmVyc2UgbGluayBJU3RhdGUgdG8gQXR0YWNrU3RhdGUtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iSVN0YXRlIiBkYXRhLWVudGl0eS0yPSJBdHRhY2tTdGF0ZSIgZGF0YS1zb3VyY2UtbGluZT0iNjMiIGRhdGEtdWlkPSJsbmsxMCIgaWQ9ImxpbmtfSVN0YXRlX0F0dGFja1N0YXRlIj48cGF0aCBjb2RlTGluZT0iNjMiIGQ9Ik03NzcuMDYsMTg3LjQzIEM3NzcuMDYsMjA2LjcxIDc3Ny4wNiwyMDkuMyA3NzcuMDYsMjI4LjU4IiBmaWxsPSJub25lIiBpZD0iSVN0YXRlLWJhY2t0by1BdHRhY2tTdGF0ZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9Im5vbmUiIHBvaW50cz0iNzc3LjA2LDE2OS40Myw3NzEuMDYsMTg3LjQzLDc4My4wNiwxODcuNDMsNzc3LjA2LDE2OS40MyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tcmV2ZXJzZSBsaW5rIElTdGF0ZSB0byBSaXNlU3RhdGUtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iSVN0YXRlIiBkYXRhLWVudGl0eS0yPSJSaXNlU3RhdGUiIGRhdGEtc291cmNlLWxpbmU9IjY0IiBkYXRhLXVpZD0ibG5rMTEiIGlkPSJsaW5rX0lTdGF0ZV9SaXNlU3RhdGUiPjxwYXRoIGNvZGVMaW5lPSI2NCIgZD0iTTkwNi44NzQ1LDE3OS43NDA1IEM5MzQuNDY0NSwxOTkuMDIwNSA5NDkuMTgsMjA5LjMgOTc2Ljc4LDIyOC41OCIgZmlsbD0ibm9uZSIgaWQ9IklTdGF0ZS1iYWNrdG8tUmlzZVN0YXRlIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0ibm9uZSIgcG9pbnRzPSI4OTIuMTIsMTY5LjQzLDkwMy40Mzc2LDE4NC42NTg2LDkxMC4zMTEzLDE3NC44MjIzLDg5Mi4xMiwxNjkuNDMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLXJldmVyc2UgbGluayBJU3RhdGUgdG8gRmFsbFN0YXRlLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9IklTdGF0ZSIgZGF0YS1lbnRpdHktMj0iRmFsbFN0YXRlIiBkYXRhLXNvdXJjZS1saW5lPSI2NSIgZGF0YS11aWQ9ImxuazEyIiBpZD0ibGlua19JU3RhdGVfRmFsbFN0YXRlIj48cGF0aCBjb2RlTGluZT0iNjUiIGQ9Ik05MjcuOTM2MSwxMjYuMDg3MyBDMTAyMy45MTYxLDE1MS4xNDczIDExMzguMiwxODQuNDUgMTI1MC4wNiwyMjkuMDggQzEyNTUuNiwyMzEuMjkgMTI2MS4yMSwyMzMuNjMgMTI2Ni44NCwyMzYuMDciIGZpbGw9Im5vbmUiIGlkPSJJU3RhdGUtYmFja3RvLUZhbGxTdGF0ZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9Im5vbmUiIHBvaW50cz0iOTEwLjUyLDEyMS41NCw5MjYuNDIwNCwxMzEuODkyNyw5MjkuNDUxOSwxMjAuMjgxOSw5MTAuNTIsMTIxLjU0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1TUkM9W3hQTDFRaUNtNDROdEZlTU0yUzhkSTNTWEs3M2ZlaEdjZkNqMWRZM0hpTUlpS0k2YWxOa1RFQXdqckRHLVdCTVNfb0txWnAtSWlPcHI0SElBeDhzMUtQbUpxUW5GUG1nSHNJaG1iWGRLbnl3TDlUWFlqVHhxU2dqaTVIamQ2eHFZUDhtQ3JfczdOOEZEVE9yVUVvaHNHNjdDejhwVUp2Y1VHYmNEdFVEelotSUt1VEY0OEppRERRWWN0VG01Zkx5OHg0TV9vQ2J0YVlXMnhxTE00MHV2bzJhSVNmZzVkNFQzcGtDWF9vU1lQcEVIeXdjeTFoajBrT1ZJVGhUbVFSYUNxc0J5Q2FEX3VsODhIMGtMTXJZa042dVZwaUROY2xSbFJiSmp0ZnNlRTlZeHNEcDVCZ2gtT2x5MV0tLT48L2c+PC9zdmc+">
<p>改进后的设计, 每个状态只需要专注自己的动作,
并且增加状态和动作不会影响到之前的代码, 这符合对扩展开放,对修改关闭.</p>
<h3 id="修改statemachine类">修改StateMachine类</h3>
<p>不再使用整数代表状态, 而是改为状态对象.</p>
<ul>
<li>原来的代码 <figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">int</span> Idle = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">int</span> Run = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">int</span> Attack = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">int</span> Rise = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">int</span> Fall = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="built_in">int</span> State = Idle;</span><br></pre></td></tr></table></figure></li>
<li>修改后的代码 <figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> IState IdleState { <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; }</span><br><span class="line"><span class="keyword">public</span> IState RunState { <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; }</span><br><span class="line"><span class="keyword">public</span> IState AttackState { <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; }</span><br><span class="line"><span class="keyword">public</span> IState RiseState { <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; }</span><br><span class="line"><span class="keyword">public</span> IState FallState { <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; }</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> IState State;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">StateMachine</span>()</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">this</span>.IdleState = <span class="keyword">new</span> IdleState(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">this</span>.RunState = <span class="keyword">new</span> RunState(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">this</span>.AttackState = <span class="keyword">new</span> AttackState(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">this</span>.RiseState = <span class="keyword">new</span> RiseState(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">this</span>.FallState = <span class="keyword">new</span> FallState(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.State = <span class="keyword">this</span>.IdleState;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="定义">定义</h2>
<p>状态模式, 允许对象在内部状态改变时改变它的行为,
对象看起来好像修改了它的类.</p>
<h2 id="构成">构成</h2>
<p><code>Context</code>: 维护对当前状态的引用,
并在状态发生改变的时候切换到新的状态.</p>
<p><code>State</code>:
定义一个<code>IState</code>接口或者<code>State</code>抽象类,
其中包含状态中的所有行为.
创建特定State类来实现<code>IState</code>接口或继承<code>State</code>抽象类,
在特定State类中实现这些行为(handle).</p>
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjM1OXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MzA3cHg7aGVpZ2h0OjM1OXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDMwNyAzNTkiIHdpZHRoPSIzMDdweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbGFzcyBDb250ZXh0LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkNvbnRleHQiIGRhdGEtc291cmNlLWxpbmU9IjEiIGRhdGEtdWlkPSJlbnQwMDAyIiBpZD0iZW50aXR5X0NvbnRleHQiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNjQuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iOTQuNjk0MyIgeD0iMTA2LjI5IiB5PSI3Ii8+PGVsbGlwc2UgY3g9IjEyNC43MTE2IiBjeT0iMjMiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTEyNy42ODAzLDI4LjY0MDYgUTEyNy4xMDIyLDI4LjkzNzUgMTI2LjQ2MTYsMjkuMDc4MSBRMTI1LjgyMSwyOS4yMzQ0IDEyNS4xMTc4LDI5LjIzNDQgUTEyMi42MTc4LDI5LjIzNDQgMTIxLjI4OTcsMjcuNTkzOCBRMTE5Ljk3NzIsMjUuOTM3NSAxMTkuOTc3MiwyMi44MTI1IFExMTkuOTc3MiwxOS42ODc1IDEyMS4yODk3LDE4LjAzMTMgUTEyMi42MTc4LDE2LjM3NSAxMjUuMTE3OCwxNi4zNzUgUTEyNS44MjEsMTYuMzc1IDEyNi40NjE2LDE2LjUzMTMgUTEyNy4xMTc4LDE2LjY4NzUgMTI3LjY4MDMsMTYuOTg0NCBMMTI3LjY4MDMsMTkuNzAzMSBRMTI3LjA1NTMsMTkuMTI1IDEyNi40NjE2LDE4Ljg1OTQgUTEyNS44Njc4LDE4LjU3ODEgMTI1LjI0MjgsMTguNTc4MSBRMTIzLjg5OTEsMTguNTc4MSAxMjMuMjExNiwxOS42NTYzIFExMjIuNTI0MSwyMC43MTg4IDEyMi41MjQxLDIyLjgxMjUgUTEyMi41MjQxLDI0LjkwNjMgMTIzLjIxMTYsMjUuOTg0NCBRMTIzLjg5OTEsMjcuMDQ2OSAxMjUuMjQyOCwyNy4wNDY5IFExMjUuODY3OCwyNy4wNDY5IDEyNi40NjE2LDI2Ljc4MTMgUTEyNy4wNTUzLDI2LjUgMTI3LjY4MDMsMjUuOTIxOSBMMTI3LjY4MDMsMjguNjQwNiBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1LjA5MDgiIHg9IjEzOS40NzE5IiB5PSIyNy44NDY3Ij5Db250ZXh0PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjEwNy4yOSIgeDI9IjE5OS45ODQzIiB5MT0iMzkiIHkyPSIzOSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgyLjY5NDMiIHg9IjExMi4yOSIgeT0iNTUuOTk1MSI+SVN0YXRlIFN0YXRlPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjEwNy4yOSIgeDI9IjE5OS45ODQzIiB5MT0iNjMuMjk2OSIgeTI9IjYzLjI5NjkiLz48L2c+PCEtLWNsYXNzIElTdGF0ZS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJJU3RhdGUiIGRhdGEtc291cmNlLWxpbmU9IjUiIGRhdGEtdWlkPSJlbnQwMDAzIiBpZD0iZW50aXR5X0lTdGF0ZSI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI4MC41OTM4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMTUuMjc3MyIgeD0iOTYiIHk9IjEzMS4yOSIvPjxlbGxpcHNlIGN4PSIxMjkuOTQwOSIgY3k9IjE0Ny4yOSIgZmlsbD0iI0I0QTdFNSIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMTI1Ljg2MjcsMTQzLjA1NTYgTDEyNS44NjI3LDE0MC44OTk0IEwxMzMuMjUzNCwxNDAuODk5NCBMMTMzLjI1MzQsMTQzLjA1NTYgTDEzMC43ODQ2LDE0My4wNTU2IEwxMzAuNzg0NiwxNTEuMTMzOCBMMTMzLjI1MzQsMTUxLjEzMzggTDEzMy4yNTM0LDE1My4yOSBMMTI1Ljg2MjcsMTUzLjI5IEwxMjUuODYyNywxNTEuMTMzOCBMMTI4LjMzMTUsMTUxLjEzMzggTDEyOC4zMzE1LDE0My4wNTU2IEwxMjUuODYyNywxNDMuMDU1NiBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXN0eWxlPSJpdGFsaWMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDEuMTg2NSIgeD0iMTQ4LjE1IiB5PSIxNTIuMTM2NyI+SVN0YXRlPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9Ijk3IiB4Mj0iMjEwLjI3NzMiIHkxPSIxNjMuMjkiIHkyPSIxNjMuMjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI5NyIgeDI9IjIxMC4yNzczIiB5MT0iMTcxLjI5IiB5Mj0iMTcxLjI5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAzLjI3NzMiIHg9IjEwMiIgeT0iMTg4LjI4NTEiPnZvaWQgSGFuZGxlMSgpPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwMy4yNzczIiB4PSIxMDIiIHk9IjIwNC41ODIiPnZvaWQgSGFuZGxlMigpPC90ZXh0PjwvZz48IS0tY2xhc3MgU3RhdGVBLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IlN0YXRlQSIgZGF0YS1zb3VyY2UtbGluZT0iMTAiIGRhdGEtdWlkPSJlbnQwMDA0IiBpZD0iZW50aXR5X1N0YXRlQSI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI4MC41OTM4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMjkuMjc3MyIgeD0iNyIgeT0iMjcxLjg5Ii8+PGVsbGlwc2UgY3g9IjQ0Ljc4OTIiIGN5PSIyODcuODkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTQ3Ljc1NzksMjkzLjUzMDYgUTQ3LjE3OTgsMjkzLjgyNzUgNDYuNTM5MiwyOTMuOTY4MSBRNDUuODk4NSwyOTQuMTI0NCA0NS4xOTU0LDI5NC4xMjQ0IFE0Mi42OTU0LDI5NC4xMjQ0IDQxLjM2NzMsMjkyLjQ4MzggUTQwLjA1NDgsMjkwLjgyNzUgNDAuMDU0OCwyODcuNzAyNSBRNDAuMDU0OCwyODQuNTc3NSA0MS4zNjczLDI4Mi45MjEzIFE0Mi42OTU0LDI4MS4yNjUgNDUuMTk1NCwyODEuMjY1IFE0NS44OTg1LDI4MS4yNjUgNDYuNTM5MiwyODEuNDIxMyBRNDcuMTk1NCwyODEuNTc3NSA0Ny43NTc5LDI4MS44NzQ0IEw0Ny43NTc5LDI4NC41OTMxIFE0Ny4xMzI5LDI4NC4wMTUgNDYuNTM5MiwyODMuNzQ5NCBRNDUuOTQ1NCwyODMuNDY4MSA0NS4zMjA0LDI4My40NjgxIFE0My45NzY3LDI4My40NjgxIDQzLjI4OTIsMjg0LjU0NjMgUTQyLjYwMTcsMjg1LjYwODggNDIuNjAxNywyODcuNzAyNSBRNDIuNjAxNywyODkuNzk2MyA0My4yODkyLDI5MC44NzQ0IFE0My45NzY3LDI5MS45MzY5IDQ1LjMyMDQsMjkxLjkzNjkgUTQ1Ljk0NTQsMjkxLjkzNjkgNDYuNTM5MiwyOTEuNjcxMyBRNDcuMTMyOSwyOTEuMzkgNDcuNzU3OSwyOTAuODExOSBMNDcuNzU3OSwyOTMuNTMwNiBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ2LjYzNDgiIHg9IjYzLjg1MzQiIHk9IjI5Mi43MzY3Ij5TdGF0ZUE8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iOCIgeDI9IjEzNS4yNzczIiB5MT0iMzAzLjg5IiB5Mj0iMzAzLjg5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iOCIgeDI9IjEzNS4yNzczIiB5MT0iMzExLjg5IiB5Mj0iMzExLjg5Ii8+PGVsbGlwc2UgY3g9IjE4IiBjeT0iMzI1LjUzODQiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwMy4yNzczIiB4PSIyNyIgeT0iMzI4Ljg4NTEiPnZvaWQgSGFuZGxlMSgpPC90ZXh0PjxlbGxpcHNlIGN4PSIxOCIgY3k9IjM0MS44MzUzIiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDMuMjc3MyIgeD0iMjciIHk9IjM0NS4xODIiPnZvaWQgSGFuZGxlMigpPC90ZXh0PjwvZz48IS0tY2xhc3MgU3RhdGVCLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IlN0YXRlQiIgZGF0YS1zb3VyY2UtbGluZT0iMTUiIGRhdGEtdWlkPSJlbnQwMDA1IiBpZD0iZW50aXR5X1N0YXRlQiI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI4MC41OTM4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMjkuMjc3MyIgeD0iMTcxIiB5PSIyNzEuODkiLz48ZWxsaXBzZSBjeD0iMjA4Ljc3NjkiIGN5PSIyODcuODkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTIxMS43NDU2LDI5My41MzA2IFEyMTEuMTY3NSwyOTMuODI3NSAyMTAuNTI2OSwyOTMuOTY4MSBRMjA5Ljg4NjIsMjk0LjEyNDQgMjA5LjE4MzEsMjk0LjEyNDQgUTIwNi42ODMxLDI5NC4xMjQ0IDIwNS4zNTUsMjkyLjQ4MzggUTIwNC4wNDI1LDI5MC44Mjc1IDIwNC4wNDI1LDI4Ny43MDI1IFEyMDQuMDQyNSwyODQuNTc3NSAyMDUuMzU1LDI4Mi45MjEzIFEyMDYuNjgzMSwyODEuMjY1IDIwOS4xODMxLDI4MS4yNjUgUTIwOS44ODYyLDI4MS4yNjUgMjEwLjUyNjksMjgxLjQyMTMgUTIxMS4xODMxLDI4MS41Nzc1IDIxMS43NDU2LDI4MS44NzQ0IEwyMTEuNzQ1NiwyODQuNTkzMSBRMjExLjEyMDYsMjg0LjAxNSAyMTAuNTI2OSwyODMuNzQ5NCBRMjA5LjkzMzEsMjgzLjQ2ODEgMjA5LjMwODEsMjgzLjQ2ODEgUTIwNy45NjQ0LDI4My40NjgxIDIwNy4yNzY5LDI4NC41NDYzIFEyMDYuNTg5NCwyODUuNjA4OCAyMDYuNTg5NCwyODcuNzAyNSBRMjA2LjU4OTQsMjg5Ljc5NjMgMjA3LjI3NjksMjkwLjg3NDQgUTIwNy45NjQ0LDI5MS45MzY5IDIwOS4zMDgxLDI5MS45MzY5IFEyMDkuOTMzMSwyOTEuOTM2OSAyMTAuNTI2OSwyOTEuNjcxMyBRMjExLjEyMDYsMjkxLjM5IDIxMS43NDU2LDI5MC44MTE5IEwyMTEuNzQ1NiwyOTMuNTMwNiBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ2LjY2MjEiIHg9IjIyNy44Mzg0IiB5PSIyOTIuNzM2NyI+U3RhdGVCPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjE3MiIgeDI9IjI5OS4yNzczIiB5MT0iMzAzLjg5IiB5Mj0iMzAzLjg5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMTcyIiB4Mj0iMjk5LjI3NzMiIHkxPSIzMTEuODkiIHkyPSIzMTEuODkiLz48ZWxsaXBzZSBjeD0iMTgyIiBjeT0iMzI1LjUzODQiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwMy4yNzczIiB4PSIxOTEiIHk9IjMyOC44ODUxIj52b2lkIEhhbmRsZTEoKTwvdGV4dD48ZWxsaXBzZSBjeD0iMTgyIiBjeT0iMzQxLjgzNTMiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwMy4yNzczIiB4PSIxOTEiIHk9IjM0NS4xODIiPnZvaWQgSGFuZGxlMigpPC90ZXh0PjwvZz48IS0tcmV2ZXJzZSBsaW5rIENvbnRleHQgdG8gSVN0YXRlLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9IkNvbnRleHQiIGRhdGEtZW50aXR5LTI9IklTdGF0ZSIgZGF0YS1zb3VyY2UtbGluZT0iMjAiIGRhdGEtdWlkPSJsbms2IiBpZD0ibGlua19Db250ZXh0X0lTdGF0ZSI+PHBhdGggY29kZUxpbmU9IjIwIiBkPSJNMTUzLjY0LDgzLjcyIEMxNTMuNjQsMTAxLjUyIDE1My42NCwxMTEuOTEgMTUzLjY0LDEzMC44OSIgZmlsbD0ibm9uZSIgaWQ9IkNvbnRleHQtYmFja3RvLUlTdGF0ZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTUzLjY0LDcxLjcyLDE0OS42NCw3Ny43MiwxNTMuNjQsODMuNzIsMTU3LjY0LDc3LjcyLDE1My42NCw3MS43MiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tcmV2ZXJzZSBsaW5rIElTdGF0ZSB0byBTdGF0ZUEtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iSVN0YXRlIiBkYXRhLWVudGl0eS0yPSJTdGF0ZUEiIGRhdGEtc291cmNlLWxpbmU9IjIxIiBkYXRhLXVpZD0ibG5rNyIgaWQ9ImxpbmtfSVN0YXRlX1N0YXRlQSI+PHBhdGggY29kZUxpbmU9IjIxIiBkPSJNMTIwLjk3NSwyMjcuNzkyIEMxMDkuOTk1LDI0Ni4zNTIgMTA2LjEyLDI1Mi45IDk1LjE0LDI3MS40NiIgZmlsbD0ibm9uZSIgaWQ9IklTdGF0ZS1iYWNrdG8tU3RhdGVBIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0ibm9uZSIgcG9pbnRzPSIxMzAuMTQsMjEyLjMsMTE1LjgxMSwyMjQuNzM3LDEyNi4xMzksMjMwLjg0NywxMzAuMTQsMjEyLjMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLXJldmVyc2UgbGluayBJU3RhdGUgdG8gU3RhdGVCLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9IklTdGF0ZSIgZGF0YS1lbnRpdHktMj0iU3RhdGVCIiBkYXRhLXNvdXJjZS1saW5lPSIyMiIgZGF0YS11aWQ9ImxuazgiIGlkPSJsaW5rX0lTdGF0ZV9TdGF0ZUIiPjxwYXRoIGNvZGVMaW5lPSIyMiIgZD0iTTE4Ni4zMDUsMjI3Ljc5MiBDMTk3LjI4NSwyNDYuMzUyIDIwMS4xNiwyNTIuOSAyMTIuMTQsMjcxLjQ2IiBmaWxsPSJub25lIiBpZD0iSVN0YXRlLWJhY2t0by1TdGF0ZUIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSJub25lIiBwb2ludHM9IjE3Ny4xNCwyMTIuMywxODEuMTQxLDIzMC44NDcsMTkxLjQ2OSwyMjQuNzM3LDE3Ny4xNCwyMTIuMyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tU1JDPVtJeXY5QjJ2TVNDeEZBcWNqQTU2ZXZiODAwaV9XYWlJSUwwS21vTE5CblBLOWIybkFJcW5FWFNiMGI5TmJQd09lVTJKY2ZVSWE2Y2ZlZVdpUDBPTTBVZkYxdmVFckVLQnJRTUZKZ09yVmhuRWZVYzQtcWpCTFhSZ1EyLWZ1Y25nVzRDSDFjNDlFMDAwMF0tLT48L2c+PC9zdmc+">
<p><a target="_blank" rel="noopener" href="https://github.com/FreeGoStudio/DevArt/tree/main/StatePattern">相关源码</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://freegostudio.github.io/2023/11/27/%E6%98%BE%E5%BC%8F%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB%E5%8E%9F%E5%88%99/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jacky Jiang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="废狗的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | 废狗的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/11/27/%E6%98%BE%E5%BC%8F%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB%E5%8E%9F%E5%88%99/" class="post-title-link" itemprop="url">显式依赖关系原则</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-11-27 10:56:09" itemprop="dateCreated datePublished" datetime="2023-11-27T10:56:09+08:00">2023-11-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-08-20 11:21:24" itemprop="dateModified" datetime="2025-08-20T11:21:24+08:00">2025-08-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">软件开发</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="explicit-dependencies-principle">Explicit Dependencies
Principle</h1>
<h2 id="定义">定义</h2>
<p>方法和类应明确要求(通常通过方法参数或构造函数参数)它们所需的任何协作对象,
以便正常运行.</p>
<h2 id="依赖项">依赖项</h2>
<p>如果您的类需要其他类来执行其操作, 那么这些其他类就是依赖项.</p>
<h2 id="隐式依赖项">隐式依赖项</h2>
<p>如果这些依赖项仅存在于类内部的代码中, 而不存在于其公共接口中,
则它们是隐式的.</p>
<h2 id="显式依赖项">显式依赖项</h2>
<p>对于类的依赖项, 显示依赖项最常出现在对象的构造函数中;
对于更多本地依赖项, 显式依赖项通常出现在特定方法的参数列表中.</p>
<h2 id="隐式依赖的缺点">隐式依赖的缺点</h2>
<p>隐式依赖关系的类比具有显式依赖关系的类的维护成本更高. 它们更难测试,
因为他们与协作者的耦合更紧密. 更难以分析副作用,
因为必须搜索整个类的代码库以查找对象实例化或对静态方法的调用.
与合作者的耦合更紧密, 导致设计更加僵化和脆弱.</p>
<h2 id="显式依赖的优点">显式依赖的优点</h2>
<p>非常清楚的说明了执行特定职能所需的条件.
它们倾向于遵循<code>最小意外原则</code>, 减少修改代码影响的范围.
无论是在生产中还是在测试或debug过程中,
显式依赖项都可以轻松的替换为其他实现.
这使得它们更容易维护并且更愿意改变.</p>
<h2 id="示例">示例</h2>
<p>示例1-隐式依赖: <figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">User</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title">Context</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> User CurrentUser;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> User <span class="title">GetCurrentUser</span>()</span></span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">return</span> CurrentUser;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Client</span></span><br><span class="line">{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">Login</span>()</span></span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">return</span> <span class="string">$"用户:<span class="subst">{Context.GetCurrentUser().Name}</span> 已登陆!"</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">var</span> user = <span class="keyword">new</span> User</span><br><span class="line">        {</span><br><span class="line">            Name = <span class="string">"A"</span></span><br><span class="line">        };</span><br><span class="line"></span><br><span class="line">        Context.CurrentUser = user;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> client = <span class="keyword">new</span> Client();</span><br><span class="line">        Console.WriteLine(client.Login());</span><br><span class="line">        Console.ReadLine();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>示例1中, Client对User对象的依赖是在Context静态类中,
并没有在公共接口中, 是隐式依赖项. 在Main中调用的时候,
并不能直观的了解到client和创建的user有什么联系, 需要查看内部具体的代码,
代码间的隔离性很差.</p>
<p>示例2-显式依赖: <figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">User</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Client</span></span><br><span class="line">{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">Login</span>(<span class="params">User user</span>)</span></span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">return</span> <span class="string">$"用户:<span class="subst">{user.Name}</span> 已登陆!"</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">var</span> user = <span class="keyword">new</span> User()</span><br><span class="line">        {</span><br><span class="line">            Name = <span class="string">"A"</span></span><br><span class="line">        };</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> client = <span class="keyword">new</span> Client();</span><br><span class="line">        Console.WriteLine(client2.Login(user));</span><br><span class="line">        Console.ReadLine();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>在示例2中, 对于示例1进行了改进.
不再将user对象的引用存储在Context中去隐式传递依赖项,
而是直接将user作为<code>client.Login</code>方法的参数传递依赖项,
能更加直观的看出关联关系,
且对于<code>Login</code>方法内部的代码也更加具有隔离性.</p>
<p><a target="_blank" rel="noopener" href="https://github.com/FreeGoStudio/DevArt/tree/main/ExplicitDependenciesPrinciple">相关源码</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://freegostudio.github.io/2023/06/06/Markdown%E4%B8%AD%E5%B5%8C%E5%85%A5PlantUML/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jacky Jiang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="废狗的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | 废狗的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/06/06/Markdown%E4%B8%AD%E5%B5%8C%E5%85%A5PlantUML/" class="post-title-link" itemprop="url">Markdown中嵌入PlantUML</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-06-06 20:35:53" itemprop="dateCreated datePublished" datetime="2023-06-06T20:35:53+08:00">2023-06-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-08-20 11:21:24" itemprop="dateModified" datetime="2025-08-20T11:21:24+08:00">2025-08-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="应用场景">应用场景</h2>
<p>使用VSCode阅读Markdown文件，希望能够直接内嵌PlantUML，并能在VSCode中阅读时能渲染PlantUML。</p>
<h2 id="实现方法">实现方法</h2>
<ol type="1">
<li>在VSCode中安装<code>PlantUML</code>插件。</li>
<li>进入VSCode设置，选择“在settings.json中编辑”。</li>
<li>在打开的json文件中末尾加上 <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">"plantuml.render"</span><span class="punctuation">:</span> <span class="string">"PlantUMLServer"</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">"plantuml.server"</span><span class="punctuation">:</span> <span class="string">"http://www.plantuml.com/plantuml"</span></span><br></pre></td></tr></table></figure>
<ul>
<li>server配置的是官方PlantUML的解析服务器地址。如需要自建PlantUML解析服务器：<a target="_blank" rel="noopener" href="https://github.com/plantuml/plantuml-server">GitHub项目地址</a></li>
</ul></li>
<li>在VSCode中按下快捷键<code>Ctrl+Shift+P</code>显示显示命令面板，输入<code>Markdown:Change Preview Security Settings</code>，选择<code>Allow insecure content 允许不安全内容</code>。</li>
<li>在你的Markdown文件中,使用以下格式就能嵌入PlantUML <figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">{% plantuml %}        Class01 &lt;|-- Class02</span><br><span class="line">Class03 *-- Class04</span><br><span class="line">Class05 o-- Class06</span><br><span class="line">Class07 .. Class08</span><br><span class="line">Class09 -- Class10{% endplantuml %}</span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://freegostudio.github.io/2023/03/30/C-%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E7%9A%84%E6%96%B9%E6%B3%95%E9%81%BF%E5%85%8D%E8%BF%94%E5%9B%9E%E7%B1%BB%E5%9E%8B%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jacky Jiang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="废狗的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | 废狗的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/03/30/C-%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E7%9A%84%E6%96%B9%E6%B3%95%E9%81%BF%E5%85%8D%E8%BF%94%E5%9B%9E%E7%B1%BB%E5%9E%8B%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/" class="post-title-link" itemprop="url">C# 实现接口的方法避免返回类型进行数据类型转换</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-03-30 09:53:30" itemprop="dateCreated datePublished" datetime="2023-03-30T09:53:30+08:00">2023-03-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-08-20 11:21:24" itemprop="dateModified" datetime="2025-08-20T11:21:24+08:00">2025-08-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">软件开发</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>今天在看C#的<a target="_blank" rel="noopener" href="https://learn.microsoft.com/zh-cn/dotnet/api/system.collections.ienumerator?view=net-7.0">IEnumerator
接口</a>的官方文档，看到在实现IEnumerable接口的GetEnumerator()方法时额外写一个同名同参的方法。感到有些疑惑，为什么要这样写，这样写的好处在哪里。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">People</span> : <span class="title">IEnumerable</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">private</span> Person[] _people;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">People</span>(<span class="params">Person[] pArray</span>)</span></span><br><span class="line">    {</span><br><span class="line">        _people = <span class="keyword">new</span> Person[pArray.Length];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; pArray.Length; i++)</span><br><span class="line">        {</span><br><span class="line">            _people[i] = pArray[i];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="comment">// Implementation for the GetEnumerator method.</span></span><br><span class="line">    IEnumerator IEnumerable.GetEnumerator()</span><br><span class="line">    {</span><br><span class="line">       <span class="keyword">return</span> (IEnumerator) GetEnumerator();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> PeopleEnum <span class="title">GetEnumerator</span>()</span></span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> PeopleEnum(_people);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<ul>
<li>注：PeopleEnum类实现了IEnumerator接口</li>
<li>IEnumerable.GetEnumerator()是显式实现接口成员，必须是默认访问修饰符。</li>
</ul>
<p>在我实现接口的时候，我通常会直接隐式实现接口成员。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">People</span> : <span class="title">IEnumerable</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">private</span> Person[] _people;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">People</span>(<span class="params">Person[] pArray</span>)</span></span><br><span class="line">    {</span><br><span class="line">        _people = <span class="keyword">new</span> Person[pArray.Length];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; pArray.Length; i++)</span><br><span class="line">        {</span><br><span class="line">            _people[i] = pArray[i];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> IEnumerator <span class="title">GetEnumerator</span>()</span></span><br><span class="line">    {</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> PeopleEnum(_people);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<ul>
<li>C# 要求隐式实现接口成员必须是public</li>
</ul>
<p>但是这样做隐式实现接口成员在返回类型是可继承或接口，且外部调用时需要使用派生后的扩展的方法就需要进行类型转换。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">People people = <span class="keyword">new</span> People(<span class="literal">null</span>);</span><br><span class="line">PeopleEnum enum1 = (PeopleEnum)people.GetEnumerator();</span><br><span class="line"><span class="built_in">int</span> enumLength = enum1.Length();</span><br></pre></td></tr></table></figure>
<p>而使用官方文档那样写，调用扩展的方法就不需要进行类型转换。
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">People people = <span class="keyword">new</span> People(<span class="literal">null</span>);</span><br><span class="line">PeopleEnum enum1 = people.GetEnumerator();</span><br><span class="line"><span class="built_in">int</span> enumLength = enum1.Length();</span><br></pre></td></tr></table></figure></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://freegostudio.github.io/2023/03/26/C-%E4%B8%AD%E4%BD%BF%E7%94%A8BeachmarkDotNet%E8%BF%9B%E8%A1%8C%E5%9F%BA%E5%87%86%E6%B5%8B%E8%AF%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jacky Jiang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="废狗的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | 废狗的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/03/26/C-%E4%B8%AD%E4%BD%BF%E7%94%A8BeachmarkDotNet%E8%BF%9B%E8%A1%8C%E5%9F%BA%E5%87%86%E6%B5%8B%E8%AF%95/" class="post-title-link" itemprop="url">C#中使用BeachmarkDotNet进行基准测试</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-03-26 01:18:10" itemprop="dateCreated datePublished" datetime="2023-03-26T01:18:10+08:00">2023-03-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-08-20 11:21:24" itemprop="dateModified" datetime="2025-08-20T11:21:24+08:00">2025-08-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">软件开发</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="安装">安装</h1>
<ol type="1">
<li>在VS2022中选择菜单项<code>工具</code>-&gt;<code>NuGet包管理</code>-&gt;<code>管理解决方案的NuGet程序包</code></li>
<li>在打开的窗口中选择<code>浏览</code>-&gt;搜索<code>BenchmarkDotNet</code>-&gt;选择搜索结果中的<code>BenchmarkDotNet</code>-&gt;点击<code>安装</code></li>
<li>所有弹出框都选择确定</li>
<li>等待完成安装</li>
</ol>
<h1 id="使用">使用</h1>
<ol type="1">
<li>创建一个的类，里面存放需要测试的函数<code>Test1()</code>和<code>Test2()</code>。
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">BenchmarkTest</span></span><br><span class="line">{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Test1</span>()</span></span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"Test1"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Test2</span>()</span></span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"Test2"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></li>
<li>对需要测试的函数增加<code>[Benchmark]</code>特性。
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">BenchmarkTest</span></span><br><span class="line">{</span><br><span class="line">    [<span class="meta">Benchmark</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Test1</span>()</span></span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"Test1"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Benchmark</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Test2</span>()</span></span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"Test2"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></li>
<li>在<code>main</code>函数中使用<code>BenchmarkRunner.Run&lt;BenchmarkTest&gt;()</code>，将会调用<code>BenchmarkTest</code>类中的待测试的函数。</li>
</ol>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">{</span><br><span class="line">    BenchmarkRunner.Run&lt;BenchmarkTest&gt;();</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<ol start="4" type="1">
<li>（可选）如果需要查看内存使用可以在class加上<code>[MemoryDiagnoser]</code>特性。</li>
</ol>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">MemoryDiagnoser</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">BenchmarkTest</span></span><br><span class="line">{</span><br><span class="line">    [<span class="meta">Benchmark</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Test1</span>()</span></span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"Test1"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Benchmark</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Test2</span>()</span></span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"Test2"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<ol start="5" type="1">
<li>将解决方案配置由<code>Debug</code>改为<code>Release</code>。</li>
<li>点击界面按钮<code>开始执行（不调试）</code>或者快捷键<code>Ctrl+F5</code>，开始执行。</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://freegostudio.github.io/2023/03/24/C-Struct%E7%9A%84%E5%80%BC%E6%8B%B7%E8%B4%9D%E7%9A%84%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jacky Jiang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="废狗的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | 废狗的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/03/24/C-Struct%E7%9A%84%E5%80%BC%E6%8B%B7%E8%B4%9D%E7%9A%84%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">C# Struct的值拷贝的问题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-03-24 21:37:29" itemprop="dateCreated datePublished" datetime="2023-03-24T21:37:29+08:00">2023-03-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-08-20 11:21:24" itemprop="dateModified" datetime="2025-08-20T11:21:24+08:00">2025-08-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">软件开发</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="概述">概述</h1>
<p>C#中的Struct是值类型数据结构，在使用时常发生值拷贝。</p>
<h3 id="公用代码">公用代码</h3>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">struct</span> ChildStruct</span><br><span class="line">{</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Value;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ChildClass</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Value;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">struct</span> ParentStruct</span><br><span class="line">{</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Value;</span><br><span class="line">    <span class="keyword">public</span> ChildStruct ChildStruct;</span><br><span class="line">    <span class="keyword">public</span> ChildClass ChildClass;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="作为参数进行值拷贝">作为参数进行值拷贝</h2>
<h3 id="示例代码">示例代码</h3>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">{</span><br><span class="line">    ParentStruct parentStruct1 = <span class="keyword">new</span> ParentStruct();</span><br><span class="line">    parentStruct1.Value = <span class="number">1</span>;</span><br><span class="line">    Console.WriteLine(parentStruct1.Value);</span><br><span class="line"></span><br><span class="line">    CopyValue1(parentStruct1);</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(parentStruct1.Value);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">CopyValue1</span>(<span class="params">ParentStruct parentStruct</span>)</span></span><br><span class="line">{</span><br><span class="line">    parentStruct.Value = <span class="number">2</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h3 id="输出结果">输出结果：</h3>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">1</span><br></pre></td></tr></table></figure>
<h3 id="分析">分析</h3>
<p>函数<code>CopyValue1</code>中对传入参数<code>parentStruct</code>的修改，并不能影响函数外<code>parentStruct1</code>的值。所以认为<code>Struct</code>作为传入参数发生了值拷贝，函数内修改的与函数修改的<code>Struct</code>并非同一个引用。</p>
<h3 id="改良">改良</h3>
<p>使用<code>ref</code>进行传参，这样不再传递<code>Struct</code>的值，而是传递<code>Struct</code>的引用来避免值拷贝。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">{</span><br><span class="line">    ParentStruct parentStruct1 = <span class="keyword">new</span> ParentStruct();</span><br><span class="line">    parentStruct1.Value = <span class="number">1</span>;</span><br><span class="line">    Console.WriteLine(parentStruct1.Value);</span><br><span class="line"></span><br><span class="line">    CopyValue1(<span class="keyword">ref</span> parentStruct1);</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(parentStruct1.Value);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">CopyValue1</span>(<span class="params"><span class="keyword">ref</span> ParentStruct parentStruct</span>)</span></span><br><span class="line">{</span><br><span class="line">    parentStruct.Value = <span class="number">2</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td></tr></table></figure>
<h2 id="return进行值拷贝">return进行值拷贝</h2>
<h3 id="示例代码-1">示例代码</h3>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">{</span><br><span class="line">    ParentStruct parentStruct1 = <span class="keyword">new</span> ParentStruct();</span><br><span class="line">    parentStruct1.Value = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    ParentStruct parentStruct2 = CopyValue2(<span class="keyword">ref</span> parentStruct1);</span><br><span class="line">    parentStruct2.Value = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(parentStruct1.Value);</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(parentStruct2.Value);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ParentStruct <span class="title">CopyValue2</span>(<span class="params"><span class="keyword">ref</span> ParentStruct parentStruct</span>)</span></span><br><span class="line">{</span><br><span class="line">    parentStruct.Value = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">return</span> parentStruct;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h3 id="输出结果-1">输出结果</h3>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">3</span><br></pre></td></tr></table></figure>
<h3 id="分析-1">分析</h3>
<p>从之前的示例可以得知ref传参传递的是引用，因此认为函数内的<code>parentStruct</code>变量的与函数外的<code>parentStruct1</code>变量是同一个引用。</p>
<p>变量<code>parentStruct2</code>接收<code>CopyValue2</code>的返回值，并对<code>parentStruct2</code>中的值进行修改，但输出的结果发现<code>parentStruct1</code>中的值并未发生修改。</p>
<p>可以得出结论：函数的返回值也是值传递，并非引用传递。</p>
<h3 id="改良-1">改良</h3>
<p>使用<code>ref</code>将返回的类型为引用类型。接收的变量也需要使用<code>ref</code>修饰。来避免值拷贝。
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">{</span><br><span class="line">    ParentStruct parentStruct1 = <span class="keyword">new</span> ParentStruct();</span><br><span class="line">    parentStruct1.Value = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">ref</span> ParentStruct parentStruct2 = <span class="function"><span class="keyword">ref</span> <span class="title">CopyValue1</span>(<span class="params"><span class="keyword">ref</span> parentStruct1</span>)</span>;</span><br><span class="line">    parentStruct2.Value = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(parentStruct1.Value);</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(parentStruct2.Value);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">ref</span> ParentStruct <span class="title">CopyValue1</span>(<span class="params"><span class="keyword">ref</span> ParentStruct parentStruct</span>)</span></span><br><span class="line">{</span><br><span class="line">    parentStruct.Value = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">ref</span> parentStruct;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">3</span><br></pre></td></tr></table></figure>
<h2 id="struct类型数组元素存为变量时进行值拷贝">Struct类型数组元素存为变量时进行值拷贝</h2>
<h3 id="示例代码-2">示例代码</h3>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">{</span><br><span class="line">    ParentStruct[] structs = <span class="keyword">new</span> ParentStruct[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    structs[<span class="number">0</span>] = <span class="keyword">new</span> ParentStruct();</span><br><span class="line">    structs[<span class="number">0</span>].Value = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(structs[<span class="number">0</span>].Value);</span><br><span class="line"></span><br><span class="line">    ParentStruct parentStruct0 = structs[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">    parentStruct0.Value = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(structs[<span class="number">0</span>].Value);</span><br><span class="line">    Console.WriteLine(parentStruct0.Value);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h3 id="输出结果-2">输出结果</h3>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">1</span><br><span class="line">2</span><br></pre></td></tr></table></figure>
<h3 id="分析-2">分析</h3>
<p>由输出的结果可以发现对于将<code>Struct数组</code>的元素存为变量<code>parentStruct0</code>后，对于<code>parentStruct0</code>的修改并不会改变数组中元素内的值，所以拷贝的是值而不是引用。</p>
<h3 id="改良-2">改良</h3>
<p>使用<code>ref</code>修饰变量，这样变量存储的是数组元素的引用来避免值拷贝。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">{</span><br><span class="line">    ParentStruct[] structs = <span class="keyword">new</span> ParentStruct[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    structs[<span class="number">0</span>] = <span class="keyword">new</span> ParentStruct();</span><br><span class="line">    structs[<span class="number">0</span>].Value = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(structs[<span class="number">0</span>].Value);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">ref</span> ParentStruct parentStruct0 = <span class="keyword">ref</span> structs[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">    parentStruct0.Value = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(structs[<span class="number">0</span>].Value);</span><br><span class="line">    Console.WriteLine(parentStruct0.Value);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="函数内创建并返回的struct避免值拷贝">函数内创建并返回的Struct避免值拷贝</h2>
<h3 id="示例代码-3">示例代码</h3>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">{</span><br><span class="line">    ParentStruct parentStruct1 = CreateParentStruct();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ParentStruct <span class="title">CreateParentStruct</span>()</span></span><br><span class="line">{</span><br><span class="line">    ParentStruct parentStruct = <span class="keyword">new</span> ParentStruct();</span><br><span class="line">    <span class="keyword">return</span> parentStruct;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h3 id="分析-3">分析</h3>
<p>从之前的结论可以得知函数返回值是值拷贝，所以使用<code>out</code>关键词来避免值拷贝</p>
<h3 id="改良-3">改良</h3>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">{</span><br><span class="line">    ParentStruct parentStruct1;</span><br><span class="line">    CreateParentStruct(<span class="keyword">out</span> parentStruct1);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">CreateParentStruct</span>(<span class="params"><span class="keyword">out</span> ParentStruct parentStruct</span>)</span></span><br><span class="line">{</span><br><span class="line">    parentStruct = <span class="keyword">new</span> ParentStruct();</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="struct内的struct类型成员与class类型成员">Struct内的Struct类型成员与Class类型成员</h2>
<p><code>ParentStruct</code>是个<code>Struct</code>，内部有<code>Struct</code>类型成员变量<code>ChildStruct</code>和<code>Class</code>类型成员变量<code>ChildClass</code>。分别创建这两种类型的变量，初始化<code>Value</code>的值，并赋值给<code>ParentStruct</code>变量对应的成员。两种类型的变量的<code>Value</code>值，观察<code>ParentStruct</code>变量内部对应成员值的变化。代码如下：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">{</span><br><span class="line">    ParentStruct parentStruct1 = <span class="keyword">new</span> ParentStruct();</span><br><span class="line"></span><br><span class="line">    ChildStruct childStruct1 = <span class="keyword">new</span> ChildStruct();</span><br><span class="line">    childStruct1.Value = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    parentStruct1.ChildStruct = childStruct1;</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(<span class="string">$"childStruct1.Value:<span class="subst">{childStruct1.Value}</span>"</span>);</span><br><span class="line"></span><br><span class="line">    childStruct1.Value = <span class="number">2</span>;</span><br><span class="line">    Console.WriteLine(<span class="string">"-------childStruct1.Value的值修改后-------"</span>);</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(<span class="string">$"childStruct1.Value:<span class="subst">{childStruct1.Value}</span>"</span>);</span><br><span class="line">    Console.WriteLine(<span class="string">$"parentStruct1.ChildStruct.Value:<span class="subst">{parentStruct1.ChildStruct.Value}</span>"</span>);</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(<span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line">    ChildClass childClass1 = <span class="keyword">new</span> ChildClass();</span><br><span class="line">    childClass1.Value = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    parentStruct1.ChildClass = childClass1;</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(<span class="string">$"childClass1.Value:<span class="subst">{childClass1.Value}</span>"</span>);</span><br><span class="line"></span><br><span class="line">    childClass1.Value = <span class="number">4</span>;</span><br><span class="line">    Console.WriteLine(<span class="string">"-------childClass1.Value的值修改后-------"</span>);</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(<span class="string">$"childClass1.Value:<span class="subst">{childClass1.Value}</span>"</span>);</span><br><span class="line">    Console.WriteLine(<span class="string">$"parentStruct1.ChildClass.Value:<span class="subst">{parentStruct1.ChildClass.Value}</span>"</span>);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h3 id="输出结果-3">输出结果</h3>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">childStruct1.Value:1</span><br><span class="line">-------childStruct1.Value的值修改后-------</span><br><span class="line">childStruct1.Value:2</span><br><span class="line">parentStruct1.ChildStruct.Value:1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">childClass1.Value:3</span><br><span class="line">-------childClass1.Value的值修改后-------</span><br><span class="line">childClass1.Value:4</span><br><span class="line">parentStruct1.ChildClass.Value:4</span><br></pre></td></tr></table></figure>
<h3 id="分析-4">分析</h3>
<p>Struct的Struct成员存储的是成员内部的值，而Struct的Class成员存储的是成员的引用。并且在C#11之前的版本没法使用ref成员。因此Struct类型的成员没法使用享元模式。因为每次都会拷贝。</p>
<h1 id="疑问">疑问</h1>
<p>对于C#的ref关键词，个人认为ref在修饰参数时和作用与类型上时是不一样的。
修饰参数时表示参数是通过引用的方式来传递的，但没法传递一个数组的元素的引用。只能传递数组元素的值拷贝，在内部对引用的变更并不会影响到外部。对此感到疑惑，因此需要慎重在方法内对于ref或out修饰的参数的引用进行修改。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://freegostudio.github.io/2023/02/15/AI%E7%BB%98%E7%94%BB-Stable-Diffusion%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jacky Jiang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="废狗的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | 废狗的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/02/15/AI%E7%BB%98%E7%94%BB-Stable-Diffusion%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" class="post-title-link" itemprop="url">AI绘画-Stable Diffusion环境搭建</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-02-15 21:23:05" itemprop="dateCreated datePublished" datetime="2023-02-15T21:23:05+08:00">2023-02-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-08-20 11:21:24" itemprop="dateModified" datetime="2025-08-20T11:21:24+08:00">2025-08-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/AI/" itemprop="url" rel="index"><span itemprop="name">AI</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="ai绘画-stable-diffusion环境搭建">AI绘画-Stable
Diffusion环境搭建</h1>
<ol type="1">
<li><p>下载git</p>
<p><code>https://git-scm.com/download/win</code></p></li>
<li><p>下载python 3.10.6（其他版本的python可能会出现报错）</p>
<p><code>https://www.python.org/ftp/python/3.10.6/python-3.10.6-amd64.exe</code></p>
<p>安装时需要勾选Add Python 3.10 to PATH。</p></li>
<li><p>下载项目</p>
<p><code>https://github.com/AUTOMATIC1111/stable-diffusion-webui.git</code></p></li>
<li><p>进入下载的目录</p>
<p>打开<code>stable-diffusion-webui\webui-user.bat</code>文件。</p>
<p>配置<code>PYTHON</code>值为python安装目录和<code>VENV_DIR</code>为取一个你想要保存模型的文件夹名称，例如：
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line"> </span><br><span class="line">set PYTHON=C:\Users\10246\AppData\Local\Programs\Python\Python310\python.exe</span><br><span class="line">set GIT=</span><br><span class="line">set VENV_DIR=venv</span><br><span class="line">set COMMANDLINE_ARGS=</span><br><span class="line"> </span><br><span class="line">call webui.bat</span><br></pre></td></tr></table></figure></p></li>
<li><p>可以使用dev-sidecar来加速。</p>
<p><code>https://github.com/docmirror/dev-sidecar</code></p></li>
<li><p>运行<code>python -m pip install --upgrade pip</code>升级pip版本。</p></li>
<li><p>运行<code>stable-diffusion-webui\webui-user.bat</code>文件。</p></li>
<li><p>然后根据依赖信息(<code>https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Dependencies</code>)下载<code>sd-v1-4.ckpt</code>文件。</p>
<p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">magnet:?xt=urn:btih:3a4a612d75ed088ea542acac52f9f45987488d1c&amp;dn=sd-v1-4.ckpt&amp;tr=udp%3a%2f%2ftracker.openbittorrent.com%3a6969%2fannounce&amp;tr=udp%3a%2f%2ftracker.opentrackr.org%3a1337</span><br></pre></td></tr></table></figure></p></li>
<li><p>将该文件放入<code>stable-diffusion-webui\models\Stable-diffusion</code>目录下，并重命名为<code>model.ckpt</code>。</p></li>
<li><p>如果出现<code>No module 'xformers'</code>。或者显存不够<code>CUDA out of memory</code>，修改<code>stable-diffusion-webui\webui-user.bat</code>文件，<code>COMMANDLINE_ARGS</code>后加入<code>--medvram --reinstall-xformers --xformers</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line"> </span><br><span class="line">set PYTHON=C:\Users\10246\AppData\Local\Programs\Python\Python310\python.exe</span><br><span class="line">set GIT=</span><br><span class="line">set VENV_DIR=venv</span><br><span class="line">set COMMANDLINE_ARGS=--medvram --reinstall-xformers --xformers</span><br><span class="line"> </span><br><span class="line">call webui.bat</span><br></pre></td></tr></table></figure></li>
<li><p>没有报错，出现<code>To create a public link, set share=True in launch().</code>，代表安装成功。</p></li>
<li><p>在浏览器的地址栏输入<code>http://127.0.0.1:7860</code>，进入ui管理界面。</p></li>
<li><p>设置中文：</p>
<ol type="a">
<li>点击<code>Extensions</code>。</li>
<li>点击<code>Available</code>。</li>
<li>将<code>localization</code>的勾去掉。</li>
<li>往下翻，找到<code>zh_CN Localization</code>，点击<code>Install</code>进行安装。</li>
<li>安装完，点击<code>Settings</code>，再点击左侧菜单的<code>User interface</code>。</li>
<li>从右侧内容区域找到<code>Localization</code>，点击右侧的刷新按钮，点击下拉框，选择<code>zh_CN</code>。</li>
<li>点击顶部的<code>Apply settings</code>，再点击<code>Reload UI</code>,
就完成中文设置。</li>
</ol></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://freegostudio.github.io/2023/01/13/Unity%E7%BC%96%E8%BE%91%E5%99%A8%E8%84%9A%E6%9C%AC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jacky Jiang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="废狗的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | 废狗的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/01/13/Unity%E7%BC%96%E8%BE%91%E5%99%A8%E8%84%9A%E6%9C%AC/" class="post-title-link" itemprop="url">Unity编辑器脚本</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-01-13 17:31:31" itemprop="dateCreated datePublished" datetime="2023-01-13T17:31:31+08:00">2023-01-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-08-20 11:21:24" itemprop="dateModified" datetime="2025-08-20T11:21:24+08:00">2025-08-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">软件开发</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="生成窗口">生成窗口</h1>
<ol type="1">
<li>在<code>Editor</code>的目录下创建一个C#脚本。写入如下的代码：
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">FloorManagerWindow</span> : <span class="title">EditorWindow</span></span><br><span class="line">{</span><br><span class="line">       [<span class="meta">MenuItem(<span class="string">"数据管理/地板"</span>)</span>]</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ShowWindow</span>()</span></span><br><span class="line">	{</span><br><span class="line">		<span class="keyword">var</span> window = EditorWindow.GetWindow(<span class="keyword">typeof</span>(FloorManagerWindow), <span class="literal">false</span>, <span class="string">"地板数据编辑器"</span>);</span><br><span class="line">		window.minSize = <span class="keyword">new</span> Vector2(<span class="number">1100</span>, <span class="number">600</span>);</span><br><span class="line">		window.Show();</span><br><span class="line">	}</span><br><span class="line">   }</span><br></pre></td></tr></table></figure></li>
<li>创建一个编辑器窗口，需要该脚本继承<code>UnityEditor.EditorWindows</code>类。</li>
<li>需要编写一个任意方法名的静态方法，如：<code>public static void ShowWindow() { }</code>。并给该方法增加一个<code>[MenuItem]</code>特性，如：<code>[MenuItem("数据管理/地板")]</code>，该特性中的参数代表Unity编辑器的菜单的路径。该特性可以按照传入的参数在Unity编辑器上创建对应的菜单。并在该菜单项的点击事件触发时调用被特性标记的方法。</li>
<li>调用<code>EditorWindow.GetWindow(typeof(FloorManagerWindow))</code>方法会根据类型创建一个窗口。</li>
<li><code>Show()</code>方法会显示窗口。PS：<code>EditorWindow.GetWindow()</code>方法本身就会去调用<code>Show()</code>方法，猜想可能是为了在<code>EditorWindow.GetWindow()</code>之后修改了某些值，因此需要再手动调用<code>Show()</code>方法，以更新修改的值。</li>
</ol>
<h1 id="scriptobject">ScriptObject</h1>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Jacky Jiang</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>

</body>
</html>
